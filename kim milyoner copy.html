<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Kim Ramazan Amcası Gibi Olmak İster - Modern v7.1</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-grad-start: #1D2B64;
            --bg-grad-end: #3d339c;
            --container-bg: rgba(0, 0, 0, 0.4);
            --element-bg-dark: #0F172A;
            --element-bg-light: #1E293B;
            --text-light: #E2E8F0;
            --text-dark: #94A3B8;
            --accent-yellow: #FACC15;
            --accent-green: #22C55E;
            --accent-red: #EF4444;
            --accent-blue: #3B82F6;
            --font-family: 'Poppins', sans-serif;
            --transition-speed: 0.6s; /* Transition duration variable */
        }

        body {
            margin: 0; padding: 0; font-family: var(--font-family);
            background: linear-gradient(135deg, var(--bg-grad-start), var(--bg-grad-end));
            color: var(--text-light); min-height: 100vh;
            display: flex; flex-direction: column;
            overflow-x: hidden;
        }

        /* --- Transitions --- */
        /* Apply transition to elements that fade */
        #category-selection-container, #container {
            transition: opacity var(--transition-speed) ease-in-out;
        }
        .hidden-section {
            opacity: 0;
            pointer-events: none;
            /* position: absolute; Remove if causing layout issues */
        }
        .visible-section {
            opacity: 1;
            pointer-events: auto;
        }

        /* --- Category Selection --- */
        #category-selection-container {
            width: 100%; text-align: center; padding: 50px 20px;
            display: flex; justify-content: center; align-items: center;
            min-height: 90vh; flex-direction: column;
            box-sizing: border-box;
             /* Starts visible */
        }
        /* Other category styles remain the same */
         #category-selection h2 { margin-bottom: 40px; font-size: 3em; font-weight: 700; color: #fff; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
         #category-selection button { margin: 15px; padding: 18px 45px; font-size: 1.5em; font-weight: 600; border: none; border-radius: 12px; background: linear-gradient(145deg, var(--accent-blue), #2a6ada); color: #fff; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); }
         #category-selection button:hover { background: linear-gradient(145deg, #2a6ada, var(--accent-blue)); transform: translateY(-3px) scale(1.03); box-shadow: 0 8px 20px rgba(43, 98, 218, 0.4); }


        /* --- Game Content Area --- */
        #container {
            display: flex; flex: 1; padding: 20px; gap: 20px;
            flex-wrap: wrap;
             /* Starts hidden */
        }
        #game-content {
            width: 100%; display: flex; flex-wrap: inherit; gap: inherit;
            /* No opacity here, controlled by parent #container */
        }

        /* --- Scoreboard --- */
        #scoreboard {
            width: 220px; background-color: var(--container-bg);
            border-radius: 12px; padding: 15px;
            max-height: calc(100vh - 120px); overflow-y: auto;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            margin-bottom: 20px;
            scrollbar-width: thin;
            scrollbar-color: var(--accent-yellow) transparent;
        }
         #scoreboard::-webkit-scrollbar { width: 8px; }
         #scoreboard::-webkit-scrollbar-track { background: transparent; }
         #scoreboard::-webkit-scrollbar-thumb { background-color: var(--accent-yellow); border-radius: 10px; border: 2px solid transparent; background-clip: content-box;}
         #scoreboard ul { list-style: none; padding: 0; margin: 0; }
         #scoreboard li { padding: 10px 8px; text-align: left; border-bottom: 1px solid rgba(255, 255, 255, 0.1); font-size: 1em; font-weight: 400; transition: background-color 0.3s, color 0.3s, transform 0.2s; color: var(--text-dark); display: flex; justify-content: space-between; }
         #scoreboard li span:first-child { color: var(--text-light); font-weight: 600; margin-right: 10px; min-width: 20px; display: inline-block; text-align: right; }
         #scoreboard li span:last-child { color: var(--text-light); font-weight: 600; }
         #scoreboard li.active { background-color: var(--accent-yellow); color: var(--element-bg-dark) !important; font-weight: 700; border-radius: 6px; transform: scale(1.05); }
         #scoreboard li.active span { color: var(--element-bg-dark) !important; }
         #scoreboard li.passed { opacity: 0.5; }
         #scoreboard li.baraj { font-weight: 600; color: var(--accent-yellow); border-top: 1px dashed var(--accent-yellow); margin-top: 8px; padding-top: 8px;}
         #scoreboard li.baraj span { color: var(--accent-yellow); }
         #scoreboard li.baraj.passed { color: var(--text-dark); border-top-color: var(--text-dark); opacity: 0.6;}
         #scoreboard li.baraj.passed span { color: var(--text-dark); }

        /* --- Game Area --- */
        #game-area { flex: 1; background: var(--container-bg); border-radius: 12px; padding: 25px; display: flex; flex-direction: column; box-shadow: 0 4px 10px rgba(0,0,0,0.3); min-width: 320px; }
        #quiz { text-align: center; flex: 1; display: flex; flex-direction: column; justify-content: space-between; }
        #quiz-content { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; }

        /* --- Question Bar, Answers, Timer, Feedback, Reward, Lifelines --- */
        /* Styles for these elements remain unchanged from the previous version */
         #question-bar { margin: 25px auto; background: linear-gradient(to right, var(--element-bg-dark), var(--element-bg-light)); padding: 20px 25px; border-radius: 10px; width: 95%; font-size: 1.6em; font-weight: 600; min-height: 80px; display: flex; align-items: center; justify-content: center; line-height: 1.5; box-shadow: 0 5px 12px rgba(0, 0, 0, 0.4); color: #fff; text-align: center; }
         .answers { width: 98%; margin: 20px auto 0 auto; display: flex; flex-wrap: wrap; justify-content: space-between; gap: 15px; }
         .answer { position: relative; width: calc(50% - 8px); background: linear-gradient(to right, var(--element-bg-light), var(--element-bg-dark)); border: 1px solid transparent; border-radius: 30px; margin-bottom: 0; padding: 18px 15px; cursor: pointer; display: flex; align-items: center; transition: all 0.3s ease; box-sizing: border-box; min-height: 70px; box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3); }
         .answer:hover:not(.disabled) { background: linear-gradient(to right, var(--accent-blue), #2a6ada); transform: translateY(-2px) scale(1.01); box-shadow: 0 6px 15px rgba(59, 130, 246, 0.3); border-color: rgba(255, 255, 255, 0.5); }
         .answer.selected { background: linear-gradient(to right, var(--accent-yellow), #eab308) !important; color: var(--element-bg-dark); transform: scale(1.03); border-color: var(--element-bg-dark); }
         .answer.selected .answer-label, .answer.selected .answer-text { color: var(--element-bg-dark); }
         .answer.correct { background: linear-gradient(to right, var(--accent-green), #16a34a) !important; color: #fff !important; border-color: #fff; }
         .answer.correct .answer-label, .answer.correct .answer-text { color: #fff !important; }
         .answer.wrong { background: linear-gradient(to right, var(--accent-red), #dc2626) !important; color: #fff !important; animation: blink 0.7s infinite; border-color: #ff9090; }
         .answer.wrong .answer-label, .answer.wrong .answer-text { color: #fff !important; }
         @keyframes blink { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.7; transform: scale(0.98); } }
         .answer.disabled { background: linear-gradient(to right, #374151, #4B5563); cursor: not-allowed; opacity: 0.6; box-shadow: none; }
         .answer.hidden-lifeline { opacity: 0; pointer-events: none; height: 0; padding: 0; margin: 0; border: none; overflow: hidden; width: 0; transition: all 0.5s ease; }
         .answer-label { font-weight: 700; margin-right: 12px; color: var(--accent-yellow); font-size: 1.2em; }
         .answer-text { flex: 1; text-align: left; font-size: 1.1em; font-weight: 400; color: var(--text-light); }
         #timer-container { margin: 15px auto 10px auto; position: relative; width: 80px; height: 80px; }
         #timer-svg { transform: rotate(-90deg); width: 100%; height: 100%; }
         #timer-circle-bg, #timer-circle-progress { fill: none; stroke-width: 7; }
         #timer-circle-bg { stroke: rgba(255, 255, 255, 0.15); }
         #timer-circle-progress { stroke: var(--accent-yellow); stroke-linecap: round; transition: stroke-dashoffset 1s linear, stroke 0.3s ease; }
         #timer-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 1.6em; font-weight: 700; color: #fff; }
         #feedback { margin: 10px 0; font-size: 1.25em; min-height: 25px; color: var(--accent-yellow); font-weight: 600; }
         #reward { margin-top: 5px; margin-bottom: 15px; font-size: 1.5em; font-weight: 700;}
         .lifelines { margin: 15px 0 20px 0; display: flex; justify-content: center; gap: 25px; }
         .lifelines button { padding: 12px 20px; font-size: 0.9em; font-weight: 600; text-transform: uppercase; border: none; border-radius: 8px; background-color: var(--accent-green); color: #fff; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); }
         .lifelines button:hover:not(:disabled) { background-color: #16a34a; transform: translateY(-2px); box-shadow: 0 6px 12px rgba(34, 197, 94, 0.3); }
         .lifelines button:disabled { background-color: #4B5563; cursor: not-allowed; opacity: 0.6; box-shadow: none; }


        /* --- Responsive Design --- */
        /* Media queries remain unchanged */
         @media (max-width: 992px) { #container { flex-direction: column; padding: 15px; gap: 15px; } #game-content { flex-direction: column; gap: 15px; } #scoreboard { width: 100%; margin-right: 0; max-height: 250px; } #game-area { padding: 20px; } .answer { width: 100%; } }
         @media (max-width: 768px) { #category-selection h2 { font-size: 2.5em; } #category-selection button { font-size: 1.3em; padding: 15px 35px; } #question-bar { font-size: 1.3em; padding: 15px 20px; min-height: 70px;} .answer-label { font-size: 1.1em; } .answer-text { font-size: 1.05em; } .lifelines { gap: 15px; } .lifelines button { padding: 10px 15px; font-size: 0.85em;} #timer-container { width: 70px; height: 70px; } #timer-text { font-size: 1.4em; } #scoreboard li { font-size: 0.95em; padding: 8px 6px; } }
         @media (max-width: 480px) { body { font-size: 14px; } #category-selection h2 { font-size: 2em; } #category-selection button { font-size: 1.1em; padding: 12px 25px; } #question-bar { font-size: 1.1em; padding: 12px 15px; } .answer { min-height: 60px; padding: 15px 12px; } .answer-label { font-size: 1em; } .answer-text { font-size: 1em; } #reward { font-size: 1.3em; } #feedback { font-size: 1.1em; } .lifelines button { font-size: 0.8em; } }

    </style>
</head>
<body>
    <div id="category-selection-container" class="visible-section"> <div id="category-selection">
            <h2>Kim Ramazan Amcası Gibi Olmak İster</h2>
            <button data-category="betul">Betül (8.sınıf)</button>
            <button data-category="beyza">Beyza (3.sınıf)</button>
            <button data-category="rumeysa">Rümeysa (1.sınıf)</button>
        </div>
    </div>

    <div id="container" class="hidden-section"> <div id="game-content">
            <div id="scoreboard">
                <ul id="scoreboard-list"></ul>
            </div>
            <div id="game-area">
                <div id="quiz">
                    <div class="lifelines">
                        <button id="lifeline-5050">50-50</button>
                        <button id="lifeline-phone">Telefon</button>
                        <button id="lifeline-audience">Seyirci</button>
                    </div>
                    <div id="timer-container">
                        <svg id="timer-svg" viewBox="0 0 36 36">
                            <circle id="timer-circle-bg" cx="18" cy="18" r="15.9155" />
                            <circle id="timer-circle-progress" cx="18" cy="18" r="15.9155" stroke-dasharray="100, 100" />
                        </svg>
                        <div id="timer-text">45</div>
                    </div>
                    <div id="quiz-content">
                        <div id="question-bar">Soru Yükleniyor...</div>
                        <div class="answers">
                            <div class="answer" data-answer="A"><span class="answer-label">A:</span><span class="answer-text"></span></div>
                            <div class="answer" data-answer="B"><span class="answer-label">B:</span><span class="answer-text"></span></div>
                            <div class="answer" data-answer="C"><span class="answer-label">C:</span><span class="answer-text"></span></div>
                            <div class="answer" data-answer="D"><span class="answer-label">D:</span><span class="answer-text"></span></div>
                        </div>
                    </div>
                    <div id="feedback"></div>
                    <div id="reward">Ödül: 0 TL</div>
                 </div>
            </div>
         </div>
    </div>

    <audio id="audio-correct" src="https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3" preload="auto"></audio>
    <audio id="audio-wrong" src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-bass-buzzer-948.mp3" preload="auto"></audio>
    <audio id="audio-lifeline-5050" src="https://assets.mixkit.co/sfx/preview/mixkit-interface-hint-notification-911.mp3" preload="auto"></audio>
    <audio id="audio-lifeline-phone" src="https://assets.mixkit.co/sfx/preview/mixkit-modern-technology-select-3124.mp3" preload="auto"></audio>
    <audio id="audio-lifeline-audience" src="https://assets.mixkit.co/sfx/preview/mixkit-short-crowd-ovation-436.mp3" preload="auto"></audio>
    <audio id="audio-tick" src="https://assets.mixkit.co/sfx/preview/mixkit-tick-tock-clock-timer-1041.mp3" loop preload="auto"></audio>
    <audio id="audio-win" src="https://assets.mixkit.co/sfx/preview/mixkit-video-game-win-2016.mp3" preload="auto"></audio>
    <audio id="audio-background" src="https://assets.mixkit.co/music/preview/mixkit-suspense-mystery-movie-trailer-21.mp3" loop preload="auto"></audio>


    <script>
    // --- SORULAR (Değişmedi - Önceki zorlaştırılmış hali) ---
    let questions = {
        "betul": [ // 8. Sınıf - Zor Seviye
            { "question": "'İpe un sermek' deyimi hangi durumda kullanılır?", "options": { "A": "Çok çalışmak", "B": "İş yapmamak için geçersiz bahaneler bulmak", "C": "Detaylı plan yapmak", "D": "Bir sırrı açığa vurmak" }, "answer": "B" },
            { "question": "x/2 - (x-1)/3 = 1 denklemini sağlayan x değeri kaçtır?", "options": { "A": "2", "B": "3", "C": "4", "D": "5" }, "answer": "C" },
            { "question": "Mitoz bölünme sonucu oluşan hücrelerin kromozom sayısı ana hücreye göre nasıldır?", "options": { "A": "Yarısı kadardır", "B": "İki katıdır", "C": "Aynıdır", "D": "Dörtte biri kadardır" }, "answer": "C" },
            { "question": "Kurtuluş Savaşı'nda Batı Cephesi Komutanı kimdir?", "options": { "A": "Mustafa Kemal Atatürk", "B": "Kazım Karabekir", "C": "Fevzi Çakmak", "D": "İsmet İnönü" }, "answer": "D" },
            { "question": "Bir ikizkenar yamuğun taban açıları birbirine eşittir. Farklı taban uzunlukları 8 cm ve 14 cm, yüksekliği 4 cm ise alanı kaç cm²'dir?", "options": { "A": "44", "B": "48", "C": "52", "D": "56" }, "answer": "A" },
            { "question": "Aşağıdaki cümlelerin hangisinde fiilimsi (eylemsi) kullanılmamıştır?", "options": { "A": "Koşan çocuk birden düştü.", "B": "Kitap okumayı çok severim.", "C": "Eve gelir gelmez uyudu.", "D": "Hava kararmadan yola çıkmalıyız." }, "answer": "C" },
            { "question": "pH değeri 7'den küçük olan maddelere ne ad verilir?", "options": { "A": "Baz", "B": "Asit", "C": "Nötr", "D": "Tuz" }, "answer": "B" },
            { "question": "Türkiye'de hangi bölgede karstik şekiller (mağara, obruk vb.) en yaygındır?", "options": { "A": "Karadeniz", "B": "Doğu Anadolu", "C": "Akdeniz", "D": "Ege" }, "answer": "C" },
            { "question": "Hangi cümlede özne, belirtili isim tamlamasından oluşmuştur?", "options": { "A": "Okulun bahçesi çok güzeldi.", "B": "Masanın örtüsü lekelenmiş.", "C": "Ali'nin kardeşi sınavı kazandı.", "D": "Güneşin doğuşu harikaydı." }, "answer": "A" },
            { "question": "Bir cismin kütlesi değişmeden Ay'a götürülürse ağırlığı nasıl değişir?", "options": { "A": "Artar", "B": "Azalır", "C": "Değişmez", "D": "Sıfır olur" }, "answer": "B" },
            { "question": "Yarıçapı 3 cm olan bir kürenin hacmi kaç π cm³'tür?", "options": { "A": "9π", "B": "18π", "C": "27π", "D": "36π" }, "answer": "D" },
            { "question": "Aşağıdaki eserlerden hangisi farklı bir yazara aittir?", "options": { "A": "Yaban", "B": "Sodom ve Gomore", "C": "Ateşten Gömlek", "D": "Çalıkuşu" }, "answer": "D" },
            { "question": "Kalıtsal çeşitliliğe neden olan temel olaylar hangileridir?", "options": { "A": "Mitoz ve Eşeysiz Üreme", "B": "Mayoz ve Döllenme", "C": "Mutasyon ve Rejenerasyon", "D": "Büyüme ve Gelişme" }, "answer": "B" },
            { "question": "Tanzimat Fermanı hangi padişah döneminde ilan edilmiştir?", "options": { "A": "II. Mahmut", "B": "Abdülmecit", "C": "Abdülaziz", "D": "II. Abdülhamit" }, "answer": "B" },
            { "question": "İki zar birlikte atıldığında üst yüze gelen sayıların toplamının 7 olma olasılığı kaçtır?", "options": { "A": "1/36", "B": "5/36", "C": "6/36 (1/6)", "D": "7/36" }, "answer": "C" },
            { "question": "Hangi cümlede ek fiilin (ek eylemin) kullanılmadığı bir isim cümlesi vardır?", "options": { "A": "En sevdiğim renk mavidir.", "B": "Hava dün oldukça soğuktu.", "C": "O, sınıfın en çalışkanıymış.", "D": "Gökyüzü bugün masmavi." }, "answer": "D" },
            { "question": "Aşağıdakilerden hangisi yenilenebilir bir enerji kaynağı değildir?", "options": { "A": "Güneş Enerjisi", "B": "Rüzgar Enerjisi", "C": "Jeotermal Enerji", "D": "Doğal Gaz" }, "answer": "D" },
            { "question": "f(x) = 2x - 5 ve g(x) = x + 3 ise, (fog)(2) değeri kaçtır?", "options": { "A": "3", "B": "5", "C": "7", "D": "9" }, "answer": "B" },
            { "question": "Lozan Antlaşması'nda çözümü sonraya bırakılan ve Türkiye aleyhine sonuçlanan konu hangisidir?", "options": { "A": "Boğazlar Sorunu", "B": "Kapitülasyonlar", "C": "Musul Sorunu (Irak Sınırı)", "D": "Yabancı Okullar" }, "answer": "C" },
            { "question": "4 farklı mektup, 3 farklı posta kutusuna kaç farklı şekilde atılabilir?", "options": { "A": "12", "B": "36", "C": "64", "D": "81" }, "answer": "D" }
        ],
         "beyza": [ // 3. Sınıf - Orta/Zor Seviye (Zorlaştırıldı)
             { "question": "Aşağıdaki sözcüklerden hangisi hecelerine yanlış ayrılmıştır?", "options": { "A": "Ki-tap-lık", "B": "Öğ-ret-men", "C": "Bil-gi-sa-yar", "D": "Tele-viz-yon" }, "answer": "D" },
             { "question": "2 yüzlük + 5 onluk + 8 birlikten oluşan sayı kaçtır?", "options": { "A": "285", "B": "258", "C": "852", "D": "528" }, "answer": "B" },
             { "question": "Dünya'mızın ısı ve ışık kaynağı nedir?", "options": { "A": "Ay", "B": "Yıldızlar", "C": "Güneş", "D": "Bulutlar" }, "answer": "C" },
             { "question": "Türkiye'nin başkenti neresidir?", "options": { "A": "İstanbul", "B": "İzmir", "C": "Bursa", "D": "Ankara" }, "answer": "D" },
             { "question": "'Islak' kelimesinin zıt anlamlısı hangisidir?", "options": { "A": "Yaş", "B": "Nemli", "C": "Kuru", "D": "Sulu" }, "answer": "C" },
             { "question": "Günde 8 sayfa kitap okuyan biri bir haftada kaç sayfa okur?", "options": { "A": "15", "B": "40", "C": "56", "D": "70" }, "answer": "C" },
             { "question": "Hangi madde mıknatıs tarafından çekilir?", "options": { "A": "Cam bardak", "B": "Plastik kaşık", "C": "Demir ataş", "D": "Tahta kalem" }, "answer": "C" },
             { "question": "Okulumuzda ve evimizde kullandığımız elektrik enerjisi nasıl üretilir?", "options": { "A": "Pillerden", "B": "Güneş panellerinden", "C": "Rüzgar türbinlerinden", "D": "Enerji santrallerinden" }, "answer": "D" },
             { "question": "'Aslan gibi çocuk.' cümlesindeki gibi sözcüğü hangi anlamı katmıştır?", "options": { "A": "Soru", "B": "Benzetme", "C": "Abartma", "D": "Karşılaştırma" }, "answer": "B" },
             { "question": "Yarım saat kaç dakikadır?", "options": { "A": "15", "B": "30", "C": "45", "D": "60" }, "answer": "B" },
             { "question": "48 TL'yi 4 kardeş eşit paylaşırsa her birine kaç TL düşer?", "options": { "A": "8 TL", "B": "10 TL", "C": "12 TL", "D": "14 TL" }, "answer": "C" },
             { "question": "'Bir elin nesi var, iki elin sesi var.' atasözü neyi anlatır?", "options": { "A": "Tek başına çalışmanın zorluğunu", "B": "Gürültü yapmamak gerektiğini", "C": "Birlik ve beraberliğin önemini", "D": "Ellerimizi temiz tutmamız gerektiğini" }, "answer": "C" },
             { "question": "Sesin yayılması için neye ihtiyaç vardır?", "options": { "A": "Işığa", "B": "Boşluğa", "C": "Ortama (hava, su, katı)", "D": "Sıcaklığa" }, "answer": "C" },
             { "question": "1 metre 25 santimetre, toplam kaç santimetredir?", "options": { "A": "125 cm", "B": "150 cm", "C": "225 cm", "D": "1025 cm" }, "answer": "A" },
             { "question": "Trafik ışıklarında kırmızı ışık yanarken ne yapmalıyız?", "options": { "A": "Hızlıca geçmeliyiz", "B": "Yavaşça geçmeliyiz", "C": "Durup beklemeliyiz", "D": "Sarı ışığın yanmasını beklemeliyiz" }, "answer": "C" },
             { "question": "Bir çiftlikte 5 tavuk ve 3 inek vardır. Bu hayvanların toplam ayak sayısı kaçtır?", "options": { "A": "8", "B": "16", "C": "22", "D": "26" }, "answer": "C" },
             { "question": "Aşağıdaki cümlelerin hangisinde eş sesli (sesteş) bir kelime yoktur?", "options": { "A": "Çay kenarında oturduk.", "B": "Yüz liram kayboldu.", "C": "Elindeki gülü kokladı.", "D": "Akşam bize gelecek." }, "answer": "D" },
             { "question": "Sağlıklı kalmak için hangisi en önemlidir?", "options": { "A": "Sadece meyve yemek", "B": "Her gün spor yapmak ama hiç dinlenmemek", "C": "Dengeli beslenmek, spor yapmak ve temizliğe dikkat etmek", "D": "Günde 10 saat uyumak" }, "answer": "C" },
             { "question": "Bir yılda kaç mevsim vardır ve bunlar sırasıyla nelerdir?", "options": { "A": "2: Yaz, Kış", "B": "3: İlkbahar, Yaz, Kış", "C": "4: İlkbahar, Yaz, Sonbahar, Kış", "D": "5: Bahar, Yaz, Güz, Kış, Kış Sonu" }, "answer": "C" },
             { "question": "Ali, Veli'den 3 yaş büyüktür. Veli 7 yaşındadır. İkisinin yaşları toplamı kaçtır?", "options": { "A": "10", "B": "13", "C": "17", "D": "20" }, "answer": "C" }
         ],
         "rumeysa": [ // 1. Sınıf - Orta Seviye (Zorlaştırıldı)
             { "question": "Hangisi bir taşıt değildir?", "options": { "A": "Otobüs", "B": "Uçak", "C": "Ağaç", "D": "Gemi" }, "answer": "C" },
             { "question": "İnek nasıl ses çıkarır?", "options": { "A": "Miyav", "B": "Hav hav", "C": "Vak vak", "D": "Möö" }, "answer": "D" },
             { "question": "Kar hangi renktir?", "options": { "A": "Mavi", "B": "Siyah", "C": "Beyaz", "D": "Yeşil" }, "answer": "C" },
             { "question": "Bir haftada kaç gün okul vardır (Cumartesi-Pazar hariç)?", "options": { "A": "3", "B": "5", "C": "7", "D": "10" }, "answer": "B" },
             { "question": "'Açık' kelimesinin zıt anlamlısı nedir?", "options": { "A": "Geniş", "B": "Dar", "C": "Kapalı", "D": "Aydınlık" }, "answer": "C" },
             { "question": "5 ile 4'ün toplamı kaçtır?", "options": { "A": "8", "B": "9", "C": "10", "D": "11" }, "answer": "B" },
             { "question": "Hangi hayvan hem karada hem suda yaşayabilir?", "options": { "A": "Balık", "B": "Kurbağa", "C": "Serçe", "D": "Kedi" }, "answer": "B" },
             { "question": "Bir karenin kaç tane köşesi vardır?", "options": { "A": "3", "B": "4", "C": "5", "D": "Kenarı yoktur" }, "answer": "B" },
             { "question": "'O' harfi ile başlayan bir renk söyle.", "options": { "A": "Mavi", "B": "Yeşil", "C": "Sarı", "D": "Turuncu" }, "answer": "D" },
             { "question": "8'den 2 çıkarırsak kaç kalır?", "options": { "A": "5", "B": "6", "C": "7", "D": "10" }, "answer": "B" },
             { "question": "Kış mevsiminde genellikle nasıl giysiler giyeriz?", "options": { "A": "Şort ve tişört", "B": "Mayo", "C": "Kalın kazak ve mont", "D": "İnce gömlek" }, "answer": "C" },
             { "question": "'Bilgisayar' kelimesi kaç harften oluşur?", "options": { "A": "8", "B": "9", "C": "10", "D": "11" }, "answer": "D" },
             { "question": "Hangi gün haftasonu tatilinin ilk günüdür?", "options": { "A": "Pazar", "B": "Pazartesi", "C": "Cuma", "D": "Cumartesi" }, "answer": "D" },
             { "question": "İki tane 5'in toplamı kaçtır?", "options": { "A": "7", "B": "9", "C": "10", "D": "12" }, "answer": "C" },
             { "question": "Yere çöp atan birini görürsen ne yapmalısın?", "options": { "A": "Hiçbir şey yapmamalısın", "B": "Sen de çöp atmalısın", "C": "Onu kibarca uyarmalısın", "D": "Gülmelisin" }, "answer": "C" },
             { "question": "Aşağıdaki sayılardan hangisi 10'dan büyüktür?", "options": { "A": "7", "B": "10", "C": "13", "D": "9" }, "answer": "C" },
             { "question": "'Telefon' kelimesinin son harfi nedir?", "options": { "A": "T", "B": "O", "C": "F", "D": "N" }, "answer": "D" },
             { "question": "Ali'nin 10 TL'si vardı. 4 TL'ye dondurma aldı. Kaç TL'si kaldı?", "options": { "A": "4 TL", "B": "5 TL", "C": "6 TL", "D": "7 TL" }, "answer": "C" },
             { "question": "Kırmızı ışık ile mavi ışığı karıştırırsak hangi renk oluşur?", "options": { "A": "Yeşil", "B": "Sarı", "C": "Mor (Magenta)", "D": "Turuncu" }, "answer": "C" },
             { "question": "10, 8, 6, 4... Bu sayı dizisinde sıradaki sayı ne olmalı?", "options": { "A": "5", "B": "3", "C": "2", "D": "0" }, "answer": "C" }
         ]
    };
    // --- SORULAR BİTTİ ---

    // --- Değişkenler ve DOM Elementleri (Referanslar Güncellendi) ---
    let currentCategory = ""; let currentQuestionIndex = 0; let currentReward = 0;
    let currentQuestion = null; let timerInterval = null; let timeRemaining = 0;
    let gameAreaVisible = false; // Başlangıçta oyun alanı görünmez
    const COUNTDOWN_TIME = 45;
    const MAX_QUESTIONS = 20;
    const maxRewards = { "betul": 300, "beyza": 200, "rumeysa": 100 };
    const BARAJ1_LEVEL = 5; const BARAJ2_LEVEL = 10;

    const categorySelectionContainer = document.getElementById("category-selection-container");
    const mainContainer = document.getElementById("container"); // Oyun içeriğini kapsayan ana div
    const gameContentDiv = document.getElementById("game-content");
    const quizDiv = document.getElementById("quiz");
    const questionBar = document.getElementById("question-bar");
    const timerTextDiv = document.getElementById("timer-text");
    const timerProgressCircle = document.getElementById("timer-circle-progress");
    const feedbackDiv = document.getElementById("feedback");
    const rewardDiv = document.getElementById("reward");
    const lifeline5050Btn = document.getElementById("lifeline-5050");
    const lifelinePhoneBtn = document.getElementById("lifeline-phone");
    const lifelineAudienceBtn = document.getElementById("lifeline-audience");
    const scoreboardList = document.getElementById("scoreboard-list");

    // Ses Elementleri (Referanslar)
     const audioElements = { /* Referanslar değişmedi */
         correct: document.getElementById("audio-correct"), wrong: document.getElementById("audio-wrong"),
         lifeline5050: document.getElementById("audio-lifeline-5050"), lifelinePhone: document.getElementById("audio-lifeline-phone"), lifelineAudience: document.getElementById("audio-lifeline-audience"),
         tick: document.getElementById("audio-tick"), win: document.getElementById("audio-win"), background: document.getElementById("audio-background")
     };

    const CIRCLE_RADIUS = 15.9155;
    const CIRCLE_CIRCUMFERENCE = 2 * Math.PI * CIRCLE_RADIUS;
    const TRANSITION_DURATION = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--transition-speed') || '0.6') * 1000; // CSS'den al, ms cinsinden
    const SCROLL_DELAY = 800; // Scroll süresi tahmini (ms)


    // --- Ses Fonksiyonları (Değişmedi) ---
     function playSound(audioElement) { /* Önceki koddaki gibi */
         if (!audioElement) { console.error("playSound: Ses elementi bulunamadı!"); return Promise.reject("Element not found"); }
         console.log(`playSound: Attempting to play ${audioElement.id}`);
         try {
             if (!audioElement.loop) { audioElement.currentTime = 0; }
             const playPromise = audioElement.play();
             if (playPromise !== undefined) {
                 return playPromise.catch(error => {
                     console.error(`playSound Error (${audioElement.id}): ${error.name} - ${error.message}`);
                     if(audioElement.id === 'audio-tick') { console.warn("Tick sound failed. Browser might require more interaction or have restrictions."); }
                     return Promise.reject(error);
                 });
             } else { console.warn(`playSound: play() did not return a promise for ${audioElement.id}.`); return Promise.resolve(); }
         } catch (e) { console.error(`playSound Exception (${audioElement.id}):`, e); return Promise.reject(e); }
     }
     function stopSound(audioElement) { /* Önceki koddaki gibi */
          if (!audioElement) { console.error("stopSound: Ses elementi bulunamadı!"); return; }
          try { audioElement.pause(); audioElement.currentTime = 0; }
          catch (e) { console.error(`stopSound Exception (${audioElement.id}):`, e); }
      }
     function stopAllSounds() { /* Önceki koddaki gibi */
          console.log("Stopping all sounds..."); Object.values(audioElements).forEach(stopSound);
      }
     function stopBackgroundMusic() { /* Önceki koddaki gibi */
          console.log("Stopping background music..."); stopSound(audioElements.background);
      }
     function unlockAudioContext() { /* Önceki koddaki gibi */
          console.log("Attempting to unlock audio context..."); let unlocked = false;
          Object.values(audioElements).forEach(audio => {
               const playPromise = audio.play();
               if (playPromise !== undefined) {
                   playPromise.then(() => { audio.pause(); audio.currentTime = 0; if (!unlocked) { console.log("Audio context likely unlocked."); unlocked = true; }})
                   .catch(error => { if (!unlocked) { console.warn(`Initial audio unlock failed for ${audio.id}. Interaction might be needed.`); /* unlocked = true; */ } });
               }
          });
      }


    // --- Olay Dinleyiciler ve GEÇİŞ YÖNETİMİ (GÜNCELLENDİ) ---
    document.querySelectorAll("#category-selection button").forEach(btn => {
        btn.addEventListener("click", () => {
            currentCategory = btn.getAttribute("data-category");
            if (!questions[currentCategory] || questions[currentCategory].length < MAX_QUESTIONS) {
                alert(`"${currentCategory}" kategorisi için yeterli sayıda (${MAX_QUESTIONS}) soru bulunamadı.`);
                return;
            }

            console.log("Category selected:", currentCategory);
            stopAllSounds();
            unlockAudioContext();

            // 1. Kategori Ekranını Fade Out Yap
            console.log("Step 1: Fading out category selection...");
            categorySelectionContainer.classList.remove('visible-section');
            categorySelectionContainer.classList.add('hidden-section');

            // 2. Fade Out Bittikten Sonra (setTimeout ile)
            setTimeout(() => {
                console.log("Step 2: Category faded out. Hiding category, showing container structure.");
                categorySelectionContainer.style.display = 'none'; // DOM'dan kaldır (isteğe bağlı)

                // Ana Oyun Container'ını görünür yap (opacity 1), ama içeriği değil
                mainContainer.classList.remove('hidden-section');
                mainContainer.classList.add('visible-section');

                // İçeriğin başlangıçta şeffaf olduğundan emin ol (CSS'de yoksa)
                // gameContentDiv.style.opacity = 0; // Gerekirse

                // 3. Oyun Alanına Kaydır
                console.log("Step 3: Scrolling to game container...");
                mainContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });

                // 4. Scroll Bittikten Sonra (Tahmini Süre ile) Oyunu Başlat
                setTimeout(() => {
                    if (mainContainer.classList.contains('visible-section')) { // Hala görünürse devam et
                         console.log("Step 4: Scroll finished. Initializing game...");
                         gameAreaVisible = true; // Oyun alanı artık aktif

                         // Oyunu Başlat
                         resetLifelines();
                         currentQuestionIndex = 0;
                         currentReward = 0;
                         updateRewardDisplay();
                         generateScoreboard();
                         loadQuestion(); // İlk soruyu yükler (timer başlar)

                         // Arka plan müziğini başlat (küçük gecikmeyle)
                         setTimeout(() => {
                              if (gameAreaVisible) {
                                   playSound(audioElements.background).catch(e => console.warn("Background music failed."));
                              }
                         }, 150);
                    } else {
                         console.log("Step 4 skipped: Main container became hidden during scroll delay.");
                    }

                }, SCROLL_DELAY); // Scroll süresi kadar bekle

            }, TRANSITION_DURATION); // Fade-out süresi kadar bekle
        });
    });

    // --- Diğer Fonksiyonlar (generateScoreboard, updateScoreboardVisuals vb.) ---
    // Bu fonksiyonlarda büyük değişiklikler yok, önceki versiyondaki halleri geçerli.
    // Sadece playSound ve stopSound çağrıları audioElements objesi üzerinden yapılıyor.
    // Örneğin: playSound(audioElements.correct), stopSound(audioElements.tick)
    function resetLifelines() { /* Değişmedi */
         lifeline5050Used = false; lifelinePhoneUsed = false; lifelineAudienceUsed = false;
         [lifeline5050Btn, lifelinePhoneBtn, lifelineAudienceBtn].forEach(btn => { btn.disabled = false; btn.style.opacity = 1; });
     }
    function generateScoreboard() { /* Değişmedi */
          scoreboardList.innerHTML = ""; const maxReward = maxRewards[currentCategory];
          for (let level = MAX_QUESTIONS; level >= 1; level--) {
              const rewardVal = Math.round(maxReward * (level / MAX_QUESTIONS)); const li = document.createElement("li"); li.setAttribute("data-step", level);
              const numberSpan = `<span>${level}.</span>`; const amountSpan = `<span>${rewardVal.toLocaleString('tr-TR')} TL</span>`; li.innerHTML = `${numberSpan}${amountSpan}`;
              if (level === BARAJ1_LEVEL || level === BARAJ2_LEVEL) { li.classList.add('baraj'); }
              if (level === MAX_QUESTIONS) { li.style.color = 'var(--accent-yellow)'; li.style.fontWeight = '700'; }
              scoreboardList.appendChild(li);
          }
          updateScoreboardVisuals();
      }
    function updateScoreboardVisuals() { /* Değişmedi */
          document.querySelectorAll("#scoreboard li").forEach(li => {
              const level = parseInt(li.getAttribute("data-step")); li.classList.remove("active", "passed"); li.style.transform = '';
              if ((level === BARAJ1_LEVEL || level === BARAJ2_LEVEL) && level <= currentQuestionIndex) { li.classList.add('passed', 'baraj'); }
              else if (level === (currentQuestionIndex + 1)) { li.classList.add("active"); li.style.transform = 'scale(1.05)'; }
              else if (level <= currentQuestionIndex) { li.classList.add("passed"); if (!li.classList.contains('baraj')) { li.style.opacity = 0.5; } }
              else { if (li.classList.contains('baraj')) { li.style.color = 'var(--accent-yellow)'; li.style.fontWeight = '600'; } else if (level !== MAX_QUESTIONS) { li.style.opacity = 1; li.style.color = ''; li.style.fontWeight = '400'; } }
          });
          updateScoreboardScroll();
      }
    function updateScoreboardScroll() { /* Değişmedi */
           const activeLi = scoreboardList.querySelector('li.active');
           if (activeLi) { activeLi.scrollIntoView({ behavior: 'smooth', block: 'nearest' }); }
           else { const firstLi = scoreboardList.querySelector('li'); if (firstLi) { firstLi.scrollIntoView({ behavior: 'smooth', block: 'start' }); } }
       }
    function loadQuestion() {
         if (!gameAreaVisible) { console.warn("loadQuestion: Game area not visible yet."); return; }
         clearTimer(); feedbackDiv.textContent = ""; enableAllAnswers();
         if (currentQuestionIndex >= MAX_QUESTIONS) {
             feedbackDiv.innerHTML = `🏆 TEBRİKLER! BÜYÜK ÖDÜL ${currentReward.toLocaleString('tr-TR')} TL'yi kazandınız! 🏆`;
             playSound(audioElements.win); stopBackgroundMusic(); disableAllAnswers(); updateScoreboardVisuals(); gameAreaVisible = false; return;
         }
         updateScoreboardVisuals(); currentQuestion = questions[currentCategory][currentQuestionIndex];
         questionBar.innerHTML = `${currentQuestionIndex + 1}. ${currentQuestion.question}`;
         const answerDivs = document.querySelectorAll(".answer");
         answerDivs.forEach(div => {
             div.classList.remove("correct", "wrong", "selected", "hidden-lifeline");
             div.style.display = 'flex'; div.style.opacity = 1; div.style.height = ''; div.style.padding = ''; div.style.margin = ''; div.style.border = '';
             div.style.pointerEvents = ''; div.style.animation = ''; div.style.width = 'calc(50% - 8px)';
             const ansKey = div.getAttribute("data-answer"); const ansTextSpan = div.querySelector(".answer-text");
             if (currentQuestion.options[ansKey] !== undefined && ansTextSpan) { ansTextSpan.textContent = currentQuestion.options[ansKey]; }
             else { div.style.display = 'none'; }
         });
         startTimer();
     }
    document.querySelectorAll(".answer").forEach(answerEl => { /* Değişmedi */
          answerEl.addEventListener("click", () => {
              if (answerEl.classList.contains("disabled") || answerEl.classList.contains("hidden-lifeline") || !gameAreaVisible) return;
              clearTimer(); const selectedAnswer = answerEl.getAttribute("data-answer"); disableAllAnswers(); answerEl.classList.add("selected");
              setTimeout(() => { answerEl.classList.remove("selected"); if (selectedAnswer === currentQuestion.answer) { handleCorrectAnswer(answerEl); } else { handleWrongAnswer(answerEl); } }, 2000);
          });
      });
    function handleCorrectAnswer(correctAnswerElement) { /* Ses elementi değişti */
          correctAnswerElement.classList.add("correct"); feedbackDiv.innerHTML = "Doğru Cevap! ✅"; playSound(audioElements.correct);
          const maxReward = maxRewards[currentCategory]; currentReward = Math.round(maxReward * ((currentQuestionIndex + 1) / MAX_QUESTIONS));
          updateRewardDisplay(); currentQuestionIndex++; setTimeout(loadQuestion, 2500);
      }
    function handleWrongAnswer(wrongAnswerElement) { /* Ses elementi değişti */
          wrongAnswerElement.classList.add("wrong"); const guaranteedReward = calculateGuaranteedReward();
          const correctAnswerDiv = document.querySelector(`.answer[data-answer="${currentQuestion.answer}"]`);
          feedbackDiv.innerHTML = `Yanlış Cevap! ❌ Doğru: ${currentQuestion.answer}.<br>Ödül: ${guaranteedReward.toLocaleString('tr-TR')} TL`;
          playSound(audioElements.wrong); stopBackgroundMusic(); if (correctAnswerDiv) { correctAnswerDiv.classList.add("correct"); }
          disableAllAnswers(); updateScoreboardVisuals(); gameAreaVisible = false;
      }
    function calculateGuaranteedReward() { /* Değişmedi */
           let guaranteedReward = 0; const maxReward = maxRewards[currentCategory];
           if (currentQuestionIndex >= BARAJ2_LEVEL) { guaranteedReward = Math.round(maxReward * (BARAJ2_LEVEL / MAX_QUESTIONS)); }
           else if (currentQuestionIndex >= BARAJ1_LEVEL) { guaranteedReward = Math.round(maxReward * (BARAJ1_LEVEL / MAX_QUESTIONS)); }
           return guaranteedReward;
       }
    function disableAllAnswers() { /* Değişmedi */
           document.querySelectorAll(".answer").forEach(div => { if (div.style.display !== 'none' && !div.classList.contains('hidden-lifeline')) { div.classList.add("disabled"); } div.style.animation = ''; div.classList.remove("selected"); });
       }
    function enableAllAnswers() { /* Değişmedi */
           document.querySelectorAll(".answer").forEach(div => { if (!div.classList.contains('hidden-lifeline')) { div.classList.remove("disabled", "correct", "wrong", "selected"); div.style.background = ''; } });
       }
    function setProgress(percent) { /* Değişmedi */
           const offset = CIRCLE_CIRCUMFERENCE - (percent / 100) * CIRCLE_CIRCUMFERENCE; timerProgressCircle.style.strokeDashoffset = offset; timerTextDiv.textContent = timeRemaining;
       }
    function startTimer() { /* Ses elementi değişti */
           clearTimer(); timeRemaining = COUNTDOWN_TIME; timerProgressCircle.style.strokeDasharray = `${CIRCLE_CIRCUMFERENCE} ${CIRCLE_CIRCUMFERENCE}`; timerProgressCircle.style.strokeDashoffset = CIRCLE_CIRCUMFERENCE;
           setTimeout(() => { if (!gameAreaVisible) return; setProgress(100 * timeRemaining / COUNTDOWN_TIME); console.log("startTimer: Attempting to play audioTick."); playSound(audioElements.tick).catch(e => console.warn("Timer tick sound failed to play.")); }, 10);
           timerInterval = setInterval(() => { if (!gameAreaVisible) { clearTimer(); return; } timeRemaining--; const percent = Math.max(0, 100 * timeRemaining / COUNTDOWN_TIME); setProgress(percent); if (timeRemaining <= 0) { handleTimeUp(); } timerProgressCircle.style.stroke = (timeRemaining <= 10) ? 'var(--accent-red)' : 'var(--accent-yellow)'; }, 1000);
       }
    function clearTimer() { /* Ses elementi değişti */
            if (timerInterval) { clearInterval(timerInterval); timerInterval = null; console.log("clearTimer: Attempting to stop audioTick."); stopSound(audioElements.tick); }
            timerTextDiv.textContent = "0"; timerProgressCircle.style.stroke = 'var(--accent-yellow)';
        }
    function handleTimeUp() { /* Ses elementi değişti */
           clearTimer(); const guaranteedReward = calculateGuaranteedReward(); feedbackDiv.innerHTML = `⏰ Süre Doldu! Oyun bitti.<br>Kazandığınız ödül: ${guaranteedReward.toLocaleString('tr-TR')} TL`;
           playSound(audioElements.wrong); stopBackgroundMusic(); disableAllAnswers();
           const correctAnswerDiv = document.querySelector(`.answer[data-answer="${currentQuestion.answer}"]`); if (correctAnswerDiv) { correctAnswerDiv.classList.add("correct"); }
           updateScoreboardVisuals(); gameAreaVisible = false;
       }
     // Joker Fonksiyonları (Ses elementleri değişti)
     let lifeline5050Used = false, lifelinePhoneUsed = false, lifelineAudienceUsed = false;
     lifeline5050Btn.addEventListener("click", () => { if (lifeline5050Used || !currentQuestion || !gameAreaVisible) return; lifeline5050Used = true; lifeline5050Btn.disabled = true; lifeline5050Btn.style.opacity = 0.6; playSound(audioElements.lifeline5050); const wrongAnswers = []; /* ... rest */ document.querySelectorAll(".answer").forEach(div => { if (div.style.display !== 'none' && !div.classList.contains('hidden-lifeline') && div.getAttribute("data-answer") !== currentQuestion.answer) { wrongAnswers.push(div); } }); let count = 0; while (count < 2 && wrongAnswers.length > 0) { const idx = Math.floor(Math.random() * wrongAnswers.length); wrongAnswers[idx].classList.add('hidden-lifeline'); wrongAnswers.splice(idx, 1); count++; } feedbackDiv.textContent = "50-50 Jokeri kullanıldı."; });
     lifelinePhoneBtn.addEventListener("click", () => { if (lifelinePhoneUsed || !currentQuestion || !gameAreaVisible) return; lifelinePhoneUsed = true; lifelinePhoneBtn.disabled = true; lifelinePhoneBtn.style.opacity = 0.6; playSound(audioElements.lifelinePhone); let phoneGuess = ""; /* ... rest */ const randomChance = Math.random(); const correctAnswerKey = currentQuestion.answer; const visibleOptions = []; document.querySelectorAll(".answer").forEach(div => { if (div.style.display !== 'none' && !div.classList.contains('hidden-lifeline')) { visibleOptions.push(div.getAttribute("data-answer")); } }); if (randomChance < 0.75 && visibleOptions.includes(correctAnswerKey)) { phoneGuess = correctAnswerKey; } else { const wrongVisibleOptions = visibleOptions.filter(opt => opt !== correctAnswerKey); if(wrongVisibleOptions.length > 0) { phoneGuess = wrongVisibleOptions[Math.floor(Math.random() * wrongVisibleOptions.length)]; } else { phoneGuess = correctAnswerKey; } } feedbackDiv.textContent = `📞 Telefonla Yardım: "Sanırım cevap ${phoneGuess} şıkkı..."`; });
     lifelineAudienceBtn.addEventListener("click", () => { if (lifelineAudienceUsed || !currentQuestion || !gameAreaVisible) return; lifelineAudienceUsed = true; lifelineAudienceBtn.disabled = true; lifelineAudienceBtn.style.opacity = 0.6; playSound(audioElements.lifelineAudience); const answers = ["A", "B", "C", "D"]; /* ... rest */ let percentages = {}; let remainingPercent = 100; const visibleOptions = []; document.querySelectorAll(".answer").forEach(div => { if (div.style.display !== 'none' && !div.classList.contains('hidden-lifeline')) { visibleOptions.push(div.getAttribute("data-answer")); } else { percentages[div.getAttribute("data-answer")] = 0; } }); if (visibleOptions.length === 0) return; const correctAnswerKey = currentQuestion.answer; let correctPercent = 0; if (visibleOptions.includes(correctAnswerKey)) { correctPercent = Math.floor(Math.random() * 31) + 40; percentages[correctAnswerKey] = correctPercent; remainingPercent -= correctPercent; } const otherVisibleOptions = visibleOptions.filter(opt => opt !== correctAnswerKey); for (let i = 0; i < otherVisibleOptions.length; i++) { const opt = otherVisibleOptions[i]; if (i === otherVisibleOptions.length - 1) { percentages[opt] = Math.max(0, remainingPercent); } else { let avgRemaining = remainingPercent / (otherVisibleOptions.length - i); let perc = Math.floor(Math.random() * Math.min(remainingPercent + 1, avgRemaining * 1.8)); perc = Math.min(perc, remainingPercent); percentages[opt] = perc; remainingPercent -= perc; } } let currentTotal = 0; visibleOptions.forEach(opt => currentTotal += (percentages[opt] || 0)); if (currentTotal !== 100 && visibleOptions.length > 0 && percentages[visibleOptions[0]] !== undefined) { let diff = 100 - currentTotal; percentages[visibleOptions[0]] = Math.max(0, percentages[visibleOptions[0]] + diff); } let resultText = "📊 Seyirci Oyları: "; answers.forEach(ans => { if (visibleOptions.includes(ans)) { resultText += ` ${ans}: %${Math.round(percentages[ans] || 0)} `; } }); feedbackDiv.textContent = resultText; });
    function updateRewardDisplay() { /* Değişmedi */
          rewardDiv.textContent = "Ödül: " + currentReward.toLocaleString('tr-TR', { style: 'currency', currency: 'TRY', minimumFractionDigits: 0, maximumFractionDigits: 0 });
      }

    // Initial Setup
    timerProgressCircle.style.strokeDasharray = `${CIRCLE_CIRCUMFERENCE} ${CIRCLE_CIRCUMFERENCE}`;
    timerProgressCircle.style.strokeDashoffset = CIRCLE_CIRCUMFERENCE;
    // Ensure correct initial visibility classes
     categorySelectionContainer.classList.add('visible-section');
     categorySelectionContainer.classList.remove('hidden-section');
     mainContainer.classList.add('hidden-section');
     mainContainer.classList.remove('visible-section');


    </script>
</body>
</html>
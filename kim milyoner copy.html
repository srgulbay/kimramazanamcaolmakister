<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Kim Ramazan Amcasƒ± Gibi Olmak ƒ∞ster - Modern v7.1</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-grad-start: #1D2B64;
            --bg-grad-end: #3d339c;
            --container-bg: rgba(0, 0, 0, 0.4);
            --element-bg-dark: #0F172A;
            --element-bg-light: #1E293B;
            --text-light: #E2E8F0;
            --text-dark: #94A3B8;
            --accent-yellow: #FACC15;
            --accent-green: #22C55E;
            --accent-red: #EF4444;
            --accent-blue: #3B82F6;
            --font-family: 'Poppins', sans-serif;
            --transition-speed: 0.6s; /* Transition duration variable */
        }

        body {
            margin: 0; padding: 0; font-family: var(--font-family);
            background: linear-gradient(135deg, var(--bg-grad-start), var(--bg-grad-end));
            color: var(--text-light); min-height: 100vh;
            display: flex; flex-direction: column;
            overflow-x: hidden;
        }

        /* --- Transitions --- */
        /* Apply transition to elements that fade */
        #category-selection-container, #container {
            transition: opacity var(--transition-speed) ease-in-out;
        }
        .hidden-section {
            opacity: 0;
            pointer-events: none;
            /* position: absolute; Remove if causing layout issues */
        }
        .visible-section {
            opacity: 1;
            pointer-events: auto;
        }

        /* --- Category Selection --- */
        #category-selection-container {
            width: 100%; text-align: center; padding: 50px 20px;
            display: flex; justify-content: center; align-items: center;
            min-height: 90vh; flex-direction: column;
            box-sizing: border-box;
             /* Starts visible */
        }
        /* Other category styles remain the same */
         #category-selection h2 { margin-bottom: 40px; font-size: 3em; font-weight: 700; color: #fff; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
         #category-selection button { margin: 15px; padding: 18px 45px; font-size: 1.5em; font-weight: 600; border: none; border-radius: 12px; background: linear-gradient(145deg, var(--accent-blue), #2a6ada); color: #fff; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); }
         #category-selection button:hover { background: linear-gradient(145deg, #2a6ada, var(--accent-blue)); transform: translateY(-3px) scale(1.03); box-shadow: 0 8px 20px rgba(43, 98, 218, 0.4); }


        /* --- Game Content Area --- */
        #container {
            display: flex; flex: 1; padding: 20px; gap: 20px;
            flex-wrap: wrap;
             /* Starts hidden */
        }
        #game-content {
            width: 100%; display: flex; flex-wrap: inherit; gap: inherit;
            /* No opacity here, controlled by parent #container */
        }

        /* --- Scoreboard --- */
        #scoreboard {
            width: 220px; background-color: var(--container-bg);
            border-radius: 12px; padding: 15px;
            max-height: calc(100vh - 120px); overflow-y: auto;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            margin-bottom: 20px;
            scrollbar-width: thin;
            scrollbar-color: var(--accent-yellow) transparent;
        }
         #scoreboard::-webkit-scrollbar { width: 8px; }
         #scoreboard::-webkit-scrollbar-track { background: transparent; }
         #scoreboard::-webkit-scrollbar-thumb { background-color: var(--accent-yellow); border-radius: 10px; border: 2px solid transparent; background-clip: content-box;}
         #scoreboard ul { list-style: none; padding: 0; margin: 0; }
         #scoreboard li { padding: 10px 8px; text-align: left; border-bottom: 1px solid rgba(255, 255, 255, 0.1); font-size: 1em; font-weight: 400; transition: background-color 0.3s, color 0.3s, transform 0.2s; color: var(--text-dark); display: flex; justify-content: space-between; }
         #scoreboard li span:first-child { color: var(--text-light); font-weight: 600; margin-right: 10px; min-width: 20px; display: inline-block; text-align: right; }
         #scoreboard li span:last-child { color: var(--text-light); font-weight: 600; }
         #scoreboard li.active { background-color: var(--accent-yellow); color: var(--element-bg-dark) !important; font-weight: 700; border-radius: 6px; transform: scale(1.05); }
         #scoreboard li.active span { color: var(--element-bg-dark) !important; }
         #scoreboard li.passed { opacity: 0.5; }
         #scoreboard li.baraj { font-weight: 600; color: var(--accent-yellow); border-top: 1px dashed var(--accent-yellow); margin-top: 8px; padding-top: 8px;}
         #scoreboard li.baraj span { color: var(--accent-yellow); }
         #scoreboard li.baraj.passed { color: var(--text-dark); border-top-color: var(--text-dark); opacity: 0.6;}
         #scoreboard li.baraj.passed span { color: var(--text-dark); }

        /* --- Game Area --- */
        #game-area { flex: 1; background: var(--container-bg); border-radius: 12px; padding: 25px; display: flex; flex-direction: column; box-shadow: 0 4px 10px rgba(0,0,0,0.3); min-width: 320px; }
        #quiz { text-align: center; flex: 1; display: flex; flex-direction: column; justify-content: space-between; }
        #quiz-content { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; }

        /* --- Question Bar, Answers, Timer, Feedback, Reward, Lifelines --- */
        /* Styles for these elements remain unchanged from the previous version */
         #question-bar { margin: 25px auto; background: linear-gradient(to right, var(--element-bg-dark), var(--element-bg-light)); padding: 20px 25px; border-radius: 10px; width: 95%; font-size: 1.6em; font-weight: 600; min-height: 80px; display: flex; align-items: center; justify-content: center; line-height: 1.5; box-shadow: 0 5px 12px rgba(0, 0, 0, 0.4); color: #fff; text-align: center; }
         .answers { width: 98%; margin: 20px auto 0 auto; display: flex; flex-wrap: wrap; justify-content: space-between; gap: 15px; }
         .answer { position: relative; width: calc(50% - 8px); background: linear-gradient(to right, var(--element-bg-light), var(--element-bg-dark)); border: 1px solid transparent; border-radius: 30px; margin-bottom: 0; padding: 18px 15px; cursor: pointer; display: flex; align-items: center; transition: all 0.3s ease; box-sizing: border-box; min-height: 70px; box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3); }
         .answer:hover:not(.disabled) { background: linear-gradient(to right, var(--accent-blue), #2a6ada); transform: translateY(-2px) scale(1.01); box-shadow: 0 6px 15px rgba(59, 130, 246, 0.3); border-color: rgba(255, 255, 255, 0.5); }
         .answer.selected { background: linear-gradient(to right, var(--accent-yellow), #eab308) !important; color: var(--element-bg-dark); transform: scale(1.03); border-color: var(--element-bg-dark); }
         .answer.selected .answer-label, .answer.selected .answer-text { color: var(--element-bg-dark); }
         .answer.correct { background: linear-gradient(to right, var(--accent-green), #16a34a) !important; color: #fff !important; border-color: #fff; }
         .answer.correct .answer-label, .answer.correct .answer-text { color: #fff !important; }
         .answer.wrong { background: linear-gradient(to right, var(--accent-red), #dc2626) !important; color: #fff !important; animation: blink 0.7s infinite; border-color: #ff9090; }
         .answer.wrong .answer-label, .answer.wrong .answer-text { color: #fff !important; }
         @keyframes blink { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.7; transform: scale(0.98); } }
         .answer.disabled { background: linear-gradient(to right, #374151, #4B5563); cursor: not-allowed; opacity: 0.6; box-shadow: none; }
         .answer.hidden-lifeline { opacity: 0; pointer-events: none; height: 0; padding: 0; margin: 0; border: none; overflow: hidden; width: 0; transition: all 0.5s ease; }
         .answer-label { font-weight: 700; margin-right: 12px; color: var(--accent-yellow); font-size: 1.2em; }
         .answer-text { flex: 1; text-align: left; font-size: 1.1em; font-weight: 400; color: var(--text-light); }
         #timer-container { margin: 15px auto 10px auto; position: relative; width: 80px; height: 80px; }
         #timer-svg { transform: rotate(-90deg); width: 100%; height: 100%; }
         #timer-circle-bg, #timer-circle-progress { fill: none; stroke-width: 7; }
         #timer-circle-bg { stroke: rgba(255, 255, 255, 0.15); }
         #timer-circle-progress { stroke: var(--accent-yellow); stroke-linecap: round; transition: stroke-dashoffset 1s linear, stroke 0.3s ease; }
         #timer-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 1.6em; font-weight: 700; color: #fff; }
         #feedback { margin: 10px 0; font-size: 1.25em; min-height: 25px; color: var(--accent-yellow); font-weight: 600; }
         #reward { margin-top: 5px; margin-bottom: 15px; font-size: 1.5em; font-weight: 700;}
         .lifelines { margin: 15px 0 20px 0; display: flex; justify-content: center; gap: 25px; }
         .lifelines button { padding: 12px 20px; font-size: 0.9em; font-weight: 600; text-transform: uppercase; border: none; border-radius: 8px; background-color: var(--accent-green); color: #fff; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); }
         .lifelines button:hover:not(:disabled) { background-color: #16a34a; transform: translateY(-2px); box-shadow: 0 6px 12px rgba(34, 197, 94, 0.3); }
         .lifelines button:disabled { background-color: #4B5563; cursor: not-allowed; opacity: 0.6; box-shadow: none; }


        /* --- Responsive Design --- */
        /* Media queries remain unchanged */
         @media (max-width: 992px) { #container { flex-direction: column; padding: 15px; gap: 15px; } #game-content { flex-direction: column; gap: 15px; } #scoreboard { width: 100%; margin-right: 0; max-height: 250px; } #game-area { padding: 20px; } .answer { width: 100%; } }
         @media (max-width: 768px) { #category-selection h2 { font-size: 2.5em; } #category-selection button { font-size: 1.3em; padding: 15px 35px; } #question-bar { font-size: 1.3em; padding: 15px 20px; min-height: 70px;} .answer-label { font-size: 1.1em; } .answer-text { font-size: 1.05em; } .lifelines { gap: 15px; } .lifelines button { padding: 10px 15px; font-size: 0.85em;} #timer-container { width: 70px; height: 70px; } #timer-text { font-size: 1.4em; } #scoreboard li { font-size: 0.95em; padding: 8px 6px; } }
         @media (max-width: 480px) { body { font-size: 14px; } #category-selection h2 { font-size: 2em; } #category-selection button { font-size: 1.1em; padding: 12px 25px; } #question-bar { font-size: 1.1em; padding: 12px 15px; } .answer { min-height: 60px; padding: 15px 12px; } .answer-label { font-size: 1em; } .answer-text { font-size: 1em; } #reward { font-size: 1.3em; } #feedback { font-size: 1.1em; } .lifelines button { font-size: 0.8em; } }

    </style>
</head>
<body>
    <div id="category-selection-container" class="visible-section"> <div id="category-selection">
            <h2>Kim Ramazan Amcasƒ± Gibi Olmak ƒ∞ster</h2>
            <button data-category="betul">Bet√ºl (8.sƒ±nƒ±f)</button>
            <button data-category="beyza">Beyza (3.sƒ±nƒ±f)</button>
            <button data-category="rumeysa">R√ºmeysa (1.sƒ±nƒ±f)</button>
        </div>
    </div>

    <div id="container" class="hidden-section"> <div id="game-content">
            <div id="scoreboard">
                <ul id="scoreboard-list"></ul>
            </div>
            <div id="game-area">
                <div id="quiz">
                    <div class="lifelines">
                        <button id="lifeline-5050">50-50</button>
                        <button id="lifeline-phone">Telefon</button>
                        <button id="lifeline-audience">Seyirci</button>
                    </div>
                    <div id="timer-container">
                        <svg id="timer-svg" viewBox="0 0 36 36">
                            <circle id="timer-circle-bg" cx="18" cy="18" r="15.9155" />
                            <circle id="timer-circle-progress" cx="18" cy="18" r="15.9155" stroke-dasharray="100, 100" />
                        </svg>
                        <div id="timer-text">45</div>
                    </div>
                    <div id="quiz-content">
                        <div id="question-bar">Soru Y√ºkleniyor...</div>
                        <div class="answers">
                            <div class="answer" data-answer="A"><span class="answer-label">A:</span><span class="answer-text"></span></div>
                            <div class="answer" data-answer="B"><span class="answer-label">B:</span><span class="answer-text"></span></div>
                            <div class="answer" data-answer="C"><span class="answer-label">C:</span><span class="answer-text"></span></div>
                            <div class="answer" data-answer="D"><span class="answer-label">D:</span><span class="answer-text"></span></div>
                        </div>
                    </div>
                    <div id="feedback"></div>
                    <div id="reward">√ñd√ºl: 0 TL</div>
                 </div>
            </div>
         </div>
    </div>

    <audio id="audio-correct" src="https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3" preload="auto"></audio>
    <audio id="audio-wrong" src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-bass-buzzer-948.mp3" preload="auto"></audio>
    <audio id="audio-lifeline-5050" src="https://assets.mixkit.co/sfx/preview/mixkit-interface-hint-notification-911.mp3" preload="auto"></audio>
    <audio id="audio-lifeline-phone" src="https://assets.mixkit.co/sfx/preview/mixkit-modern-technology-select-3124.mp3" preload="auto"></audio>
    <audio id="audio-lifeline-audience" src="https://assets.mixkit.co/sfx/preview/mixkit-short-crowd-ovation-436.mp3" preload="auto"></audio>
    <audio id="audio-tick" src="https://assets.mixkit.co/sfx/preview/mixkit-tick-tock-clock-timer-1041.mp3" loop preload="auto"></audio>
    <audio id="audio-win" src="https://assets.mixkit.co/sfx/preview/mixkit-video-game-win-2016.mp3" preload="auto"></audio>
    <audio id="audio-background" src="https://assets.mixkit.co/music/preview/mixkit-suspense-mystery-movie-trailer-21.mp3" loop preload="auto"></audio>


    <script>
    // --- SORULAR (Deƒüi≈ümedi - √ñnceki zorla≈ütƒ±rƒ±lmƒ±≈ü hali) ---
    let questions = {
        "betul": [ // 8. Sƒ±nƒ±f - Zor Seviye
            { "question": "'ƒ∞pe un sermek' deyimi hangi durumda kullanƒ±lƒ±r?", "options": { "A": "√áok √ßalƒ±≈ümak", "B": "ƒ∞≈ü yapmamak i√ßin ge√ßersiz bahaneler bulmak", "C": "Detaylƒ± plan yapmak", "D": "Bir sƒ±rrƒ± a√ßƒ±ƒüa vurmak" }, "answer": "B" },
            { "question": "x/2 - (x-1)/3 = 1 denklemini saƒülayan x deƒüeri ka√ßtƒ±r?", "options": { "A": "2", "B": "3", "C": "4", "D": "5" }, "answer": "C" },
            { "question": "Mitoz b√∂l√ºnme sonucu olu≈üan h√ºcrelerin kromozom sayƒ±sƒ± ana h√ºcreye g√∂re nasƒ±ldƒ±r?", "options": { "A": "Yarƒ±sƒ± kadardƒ±r", "B": "ƒ∞ki katƒ±dƒ±r", "C": "Aynƒ±dƒ±r", "D": "D√∂rtte biri kadardƒ±r" }, "answer": "C" },
            { "question": "Kurtulu≈ü Sava≈üƒ±'nda Batƒ± Cephesi Komutanƒ± kimdir?", "options": { "A": "Mustafa Kemal Atat√ºrk", "B": "Kazƒ±m Karabekir", "C": "Fevzi √áakmak", "D": "ƒ∞smet ƒ∞n√∂n√º" }, "answer": "D" },
            { "question": "Bir ikizkenar yamuƒüun taban a√ßƒ±larƒ± birbirine e≈üittir. Farklƒ± taban uzunluklarƒ± 8 cm ve 14 cm, y√ºksekliƒüi 4 cm ise alanƒ± ka√ß cm¬≤'dir?", "options": { "A": "44", "B": "48", "C": "52", "D": "56" }, "answer": "A" },
            { "question": "A≈üaƒüƒ±daki c√ºmlelerin hangisinde fiilimsi (eylemsi) kullanƒ±lmamƒ±≈ütƒ±r?", "options": { "A": "Ko≈üan √ßocuk birden d√º≈üt√º.", "B": "Kitap okumayƒ± √ßok severim.", "C": "Eve gelir gelmez uyudu.", "D": "Hava kararmadan yola √ßƒ±kmalƒ±yƒ±z." }, "answer": "C" },
            { "question": "pH deƒüeri 7'den k√º√ß√ºk olan maddelere ne ad verilir?", "options": { "A": "Baz", "B": "Asit", "C": "N√∂tr", "D": "Tuz" }, "answer": "B" },
            { "question": "T√ºrkiye'de hangi b√∂lgede karstik ≈üekiller (maƒüara, obruk vb.) en yaygƒ±ndƒ±r?", "options": { "A": "Karadeniz", "B": "Doƒüu Anadolu", "C": "Akdeniz", "D": "Ege" }, "answer": "C" },
            { "question": "Hangi c√ºmlede √∂zne, belirtili isim tamlamasƒ±ndan olu≈ümu≈ütur?", "options": { "A": "Okulun bah√ßesi √ßok g√ºzeldi.", "B": "Masanƒ±n √∂rt√ºs√º lekelenmi≈ü.", "C": "Ali'nin karde≈üi sƒ±navƒ± kazandƒ±.", "D": "G√ºne≈üin doƒüu≈üu harikaydƒ±." }, "answer": "A" },
            { "question": "Bir cismin k√ºtlesi deƒüi≈ümeden Ay'a g√∂t√ºr√ºl√ºrse aƒüƒ±rlƒ±ƒüƒ± nasƒ±l deƒüi≈üir?", "options": { "A": "Artar", "B": "Azalƒ±r", "C": "Deƒüi≈ümez", "D": "Sƒ±fƒ±r olur" }, "answer": "B" },
            { "question": "Yarƒ±√ßapƒ± 3 cm olan bir k√ºrenin hacmi ka√ß œÄ cm¬≥'t√ºr?", "options": { "A": "9œÄ", "B": "18œÄ", "C": "27œÄ", "D": "36œÄ" }, "answer": "D" },
            { "question": "A≈üaƒüƒ±daki eserlerden hangisi farklƒ± bir yazara aittir?", "options": { "A": "Yaban", "B": "Sodom ve Gomore", "C": "Ate≈üten G√∂mlek", "D": "√áalƒ±ku≈üu" }, "answer": "D" },
            { "question": "Kalƒ±tsal √ße≈üitliliƒüe neden olan temel olaylar hangileridir?", "options": { "A": "Mitoz ve E≈üeysiz √úreme", "B": "Mayoz ve D√∂llenme", "C": "Mutasyon ve Rejenerasyon", "D": "B√ºy√ºme ve Geli≈üme" }, "answer": "B" },
            { "question": "Tanzimat Fermanƒ± hangi padi≈üah d√∂neminde ilan edilmi≈ütir?", "options": { "A": "II. Mahmut", "B": "Abd√ºlmecit", "C": "Abd√ºlaziz", "D": "II. Abd√ºlhamit" }, "answer": "B" },
            { "question": "ƒ∞ki zar birlikte atƒ±ldƒ±ƒüƒ±nda √ºst y√ºze gelen sayƒ±larƒ±n toplamƒ±nƒ±n 7 olma olasƒ±lƒ±ƒüƒ± ka√ßtƒ±r?", "options": { "A": "1/36", "B": "5/36", "C": "6/36 (1/6)", "D": "7/36" }, "answer": "C" },
            { "question": "Hangi c√ºmlede ek fiilin (ek eylemin) kullanƒ±lmadƒ±ƒüƒ± bir isim c√ºmlesi vardƒ±r?", "options": { "A": "En sevdiƒüim renk mavidir.", "B": "Hava d√ºn olduk√ßa soƒüuktu.", "C": "O, sƒ±nƒ±fƒ±n en √ßalƒ±≈ükanƒ±ymƒ±≈ü.", "D": "G√∂ky√ºz√º bug√ºn masmavi." }, "answer": "D" },
            { "question": "A≈üaƒüƒ±dakilerden hangisi yenilenebilir bir enerji kaynaƒüƒ± deƒüildir?", "options": { "A": "G√ºne≈ü Enerjisi", "B": "R√ºzgar Enerjisi", "C": "Jeotermal Enerji", "D": "Doƒüal Gaz" }, "answer": "D" },
            { "question": "f(x) = 2x - 5 ve g(x) = x + 3 ise, (fog)(2) deƒüeri ka√ßtƒ±r?", "options": { "A": "3", "B": "5", "C": "7", "D": "9" }, "answer": "B" },
            { "question": "Lozan Antla≈ümasƒ±'nda √ß√∂z√ºm√º sonraya bƒ±rakƒ±lan ve T√ºrkiye aleyhine sonu√ßlanan konu hangisidir?", "options": { "A": "Boƒüazlar Sorunu", "B": "Kapit√ºlasyonlar", "C": "Musul Sorunu (Irak Sƒ±nƒ±rƒ±)", "D": "Yabancƒ± Okullar" }, "answer": "C" },
            { "question": "4 farklƒ± mektup, 3 farklƒ± posta kutusuna ka√ß farklƒ± ≈üekilde atƒ±labilir?", "options": { "A": "12", "B": "36", "C": "64", "D": "81" }, "answer": "D" }
        ],
         "beyza": [ // 3. Sƒ±nƒ±f - Orta/Zor Seviye (Zorla≈ütƒ±rƒ±ldƒ±)
             { "question": "A≈üaƒüƒ±daki s√∂zc√ºklerden hangisi hecelerine yanlƒ±≈ü ayrƒ±lmƒ±≈ütƒ±r?", "options": { "A": "Ki-tap-lƒ±k", "B": "√ñƒü-ret-men", "C": "Bil-gi-sa-yar", "D": "Tele-viz-yon" }, "answer": "D" },
             { "question": "2 y√ºzl√ºk + 5 onluk + 8 birlikten olu≈üan sayƒ± ka√ßtƒ±r?", "options": { "A": "285", "B": "258", "C": "852", "D": "528" }, "answer": "B" },
             { "question": "D√ºnya'mƒ±zƒ±n ƒ±sƒ± ve ƒ±≈üƒ±k kaynaƒüƒ± nedir?", "options": { "A": "Ay", "B": "Yƒ±ldƒ±zlar", "C": "G√ºne≈ü", "D": "Bulutlar" }, "answer": "C" },
             { "question": "T√ºrkiye'nin ba≈ükenti neresidir?", "options": { "A": "ƒ∞stanbul", "B": "ƒ∞zmir", "C": "Bursa", "D": "Ankara" }, "answer": "D" },
             { "question": "'Islak' kelimesinin zƒ±t anlamlƒ±sƒ± hangisidir?", "options": { "A": "Ya≈ü", "B": "Nemli", "C": "Kuru", "D": "Sulu" }, "answer": "C" },
             { "question": "G√ºnde 8 sayfa kitap okuyan biri bir haftada ka√ß sayfa okur?", "options": { "A": "15", "B": "40", "C": "56", "D": "70" }, "answer": "C" },
             { "question": "Hangi madde mƒ±knatƒ±s tarafƒ±ndan √ßekilir?", "options": { "A": "Cam bardak", "B": "Plastik ka≈üƒ±k", "C": "Demir ata≈ü", "D": "Tahta kalem" }, "answer": "C" },
             { "question": "Okulumuzda ve evimizde kullandƒ±ƒüƒ±mƒ±z elektrik enerjisi nasƒ±l √ºretilir?", "options": { "A": "Pillerden", "B": "G√ºne≈ü panellerinden", "C": "R√ºzgar t√ºrbinlerinden", "D": "Enerji santrallerinden" }, "answer": "D" },
             { "question": "'Aslan gibi √ßocuk.' c√ºmlesindeki gibi s√∂zc√ºƒü√º hangi anlamƒ± katmƒ±≈ütƒ±r?", "options": { "A": "Soru", "B": "Benzetme", "C": "Abartma", "D": "Kar≈üƒ±la≈ütƒ±rma" }, "answer": "B" },
             { "question": "Yarƒ±m saat ka√ß dakikadƒ±r?", "options": { "A": "15", "B": "30", "C": "45", "D": "60" }, "answer": "B" },
             { "question": "48 TL'yi 4 karde≈ü e≈üit payla≈üƒ±rsa her birine ka√ß TL d√º≈üer?", "options": { "A": "8 TL", "B": "10 TL", "C": "12 TL", "D": "14 TL" }, "answer": "C" },
             { "question": "'Bir elin nesi var, iki elin sesi var.' atas√∂z√º neyi anlatƒ±r?", "options": { "A": "Tek ba≈üƒ±na √ßalƒ±≈ümanƒ±n zorluƒüunu", "B": "G√ºr√ºlt√º yapmamak gerektiƒüini", "C": "Birlik ve beraberliƒüin √∂nemini", "D": "Ellerimizi temiz tutmamƒ±z gerektiƒüini" }, "answer": "C" },
             { "question": "Sesin yayƒ±lmasƒ± i√ßin neye ihtiya√ß vardƒ±r?", "options": { "A": "I≈üƒ±ƒüa", "B": "Bo≈üluƒüa", "C": "Ortama (hava, su, katƒ±)", "D": "Sƒ±caklƒ±ƒüa" }, "answer": "C" },
             { "question": "1 metre 25 santimetre, toplam ka√ß santimetredir?", "options": { "A": "125 cm", "B": "150 cm", "C": "225 cm", "D": "1025 cm" }, "answer": "A" },
             { "question": "Trafik ƒ±≈üƒ±klarƒ±nda kƒ±rmƒ±zƒ± ƒ±≈üƒ±k yanarken ne yapmalƒ±yƒ±z?", "options": { "A": "Hƒ±zlƒ±ca ge√ßmeliyiz", "B": "Yava≈ü√ßa ge√ßmeliyiz", "C": "Durup beklemeliyiz", "D": "Sarƒ± ƒ±≈üƒ±ƒüƒ±n yanmasƒ±nƒ± beklemeliyiz" }, "answer": "C" },
             { "question": "Bir √ßiftlikte 5 tavuk ve 3 inek vardƒ±r. Bu hayvanlarƒ±n toplam ayak sayƒ±sƒ± ka√ßtƒ±r?", "options": { "A": "8", "B": "16", "C": "22", "D": "26" }, "answer": "C" },
             { "question": "A≈üaƒüƒ±daki c√ºmlelerin hangisinde e≈ü sesli (seste≈ü) bir kelime yoktur?", "options": { "A": "√áay kenarƒ±nda oturduk.", "B": "Y√ºz liram kayboldu.", "C": "Elindeki g√ºl√º kokladƒ±.", "D": "Ak≈üam bize gelecek." }, "answer": "D" },
             { "question": "Saƒülƒ±klƒ± kalmak i√ßin hangisi en √∂nemlidir?", "options": { "A": "Sadece meyve yemek", "B": "Her g√ºn spor yapmak ama hi√ß dinlenmemek", "C": "Dengeli beslenmek, spor yapmak ve temizliƒüe dikkat etmek", "D": "G√ºnde 10 saat uyumak" }, "answer": "C" },
             { "question": "Bir yƒ±lda ka√ß mevsim vardƒ±r ve bunlar sƒ±rasƒ±yla nelerdir?", "options": { "A": "2: Yaz, Kƒ±≈ü", "B": "3: ƒ∞lkbahar, Yaz, Kƒ±≈ü", "C": "4: ƒ∞lkbahar, Yaz, Sonbahar, Kƒ±≈ü", "D": "5: Bahar, Yaz, G√ºz, Kƒ±≈ü, Kƒ±≈ü Sonu" }, "answer": "C" },
             { "question": "Ali, Veli'den 3 ya≈ü b√ºy√ºkt√ºr. Veli 7 ya≈üƒ±ndadƒ±r. ƒ∞kisinin ya≈ülarƒ± toplamƒ± ka√ßtƒ±r?", "options": { "A": "10", "B": "13", "C": "17", "D": "20" }, "answer": "C" }
         ],
         "rumeysa": [ // 1. Sƒ±nƒ±f - Orta Seviye (Zorla≈ütƒ±rƒ±ldƒ±)
             { "question": "Hangisi bir ta≈üƒ±t deƒüildir?", "options": { "A": "Otob√ºs", "B": "U√ßak", "C": "Aƒüa√ß", "D": "Gemi" }, "answer": "C" },
             { "question": "ƒ∞nek nasƒ±l ses √ßƒ±karƒ±r?", "options": { "A": "Miyav", "B": "Hav hav", "C": "Vak vak", "D": "M√∂√∂" }, "answer": "D" },
             { "question": "Kar hangi renktir?", "options": { "A": "Mavi", "B": "Siyah", "C": "Beyaz", "D": "Ye≈üil" }, "answer": "C" },
             { "question": "Bir haftada ka√ß g√ºn okul vardƒ±r (Cumartesi-Pazar hari√ß)?", "options": { "A": "3", "B": "5", "C": "7", "D": "10" }, "answer": "B" },
             { "question": "'A√ßƒ±k' kelimesinin zƒ±t anlamlƒ±sƒ± nedir?", "options": { "A": "Geni≈ü", "B": "Dar", "C": "Kapalƒ±", "D": "Aydƒ±nlƒ±k" }, "answer": "C" },
             { "question": "5 ile 4'√ºn toplamƒ± ka√ßtƒ±r?", "options": { "A": "8", "B": "9", "C": "10", "D": "11" }, "answer": "B" },
             { "question": "Hangi hayvan hem karada hem suda ya≈üayabilir?", "options": { "A": "Balƒ±k", "B": "Kurbaƒüa", "C": "Ser√ße", "D": "Kedi" }, "answer": "B" },
             { "question": "Bir karenin ka√ß tane k√∂≈üesi vardƒ±r?", "options": { "A": "3", "B": "4", "C": "5", "D": "Kenarƒ± yoktur" }, "answer": "B" },
             { "question": "'O' harfi ile ba≈ülayan bir renk s√∂yle.", "options": { "A": "Mavi", "B": "Ye≈üil", "C": "Sarƒ±", "D": "Turuncu" }, "answer": "D" },
             { "question": "8'den 2 √ßƒ±karƒ±rsak ka√ß kalƒ±r?", "options": { "A": "5", "B": "6", "C": "7", "D": "10" }, "answer": "B" },
             { "question": "Kƒ±≈ü mevsiminde genellikle nasƒ±l giysiler giyeriz?", "options": { "A": "≈ûort ve ti≈ü√∂rt", "B": "Mayo", "C": "Kalƒ±n kazak ve mont", "D": "ƒ∞nce g√∂mlek" }, "answer": "C" },
             { "question": "'Bilgisayar' kelimesi ka√ß harften olu≈üur?", "options": { "A": "8", "B": "9", "C": "10", "D": "11" }, "answer": "D" },
             { "question": "Hangi g√ºn haftasonu tatilinin ilk g√ºn√ºd√ºr?", "options": { "A": "Pazar", "B": "Pazartesi", "C": "Cuma", "D": "Cumartesi" }, "answer": "D" },
             { "question": "ƒ∞ki tane 5'in toplamƒ± ka√ßtƒ±r?", "options": { "A": "7", "B": "9", "C": "10", "D": "12" }, "answer": "C" },
             { "question": "Yere √ß√∂p atan birini g√∂r√ºrsen ne yapmalƒ±sƒ±n?", "options": { "A": "Hi√ßbir ≈üey yapmamalƒ±sƒ±n", "B": "Sen de √ß√∂p atmalƒ±sƒ±n", "C": "Onu kibarca uyarmalƒ±sƒ±n", "D": "G√ºlmelisin" }, "answer": "C" },
             { "question": "A≈üaƒüƒ±daki sayƒ±lardan hangisi 10'dan b√ºy√ºkt√ºr?", "options": { "A": "7", "B": "10", "C": "13", "D": "9" }, "answer": "C" },
             { "question": "'Telefon' kelimesinin son harfi nedir?", "options": { "A": "T", "B": "O", "C": "F", "D": "N" }, "answer": "D" },
             { "question": "Ali'nin 10 TL'si vardƒ±. 4 TL'ye dondurma aldƒ±. Ka√ß TL'si kaldƒ±?", "options": { "A": "4 TL", "B": "5 TL", "C": "6 TL", "D": "7 TL" }, "answer": "C" },
             { "question": "Kƒ±rmƒ±zƒ± ƒ±≈üƒ±k ile mavi ƒ±≈üƒ±ƒüƒ± karƒ±≈ütƒ±rƒ±rsak hangi renk olu≈üur?", "options": { "A": "Ye≈üil", "B": "Sarƒ±", "C": "Mor (Magenta)", "D": "Turuncu" }, "answer": "C" },
             { "question": "10, 8, 6, 4... Bu sayƒ± dizisinde sƒ±radaki sayƒ± ne olmalƒ±?", "options": { "A": "5", "B": "3", "C": "2", "D": "0" }, "answer": "C" }
         ]
    };
    // --- SORULAR Bƒ∞TTƒ∞ ---

    // --- Deƒüi≈ükenler ve DOM Elementleri (Referanslar G√ºncellendi) ---
    let currentCategory = ""; let currentQuestionIndex = 0; let currentReward = 0;
    let currentQuestion = null; let timerInterval = null; let timeRemaining = 0;
    let gameAreaVisible = false; // Ba≈ülangƒ±√ßta oyun alanƒ± g√∂r√ºnmez
    const COUNTDOWN_TIME = 45;
    const MAX_QUESTIONS = 20;
    const maxRewards = { "betul": 300, "beyza": 200, "rumeysa": 100 };
    const BARAJ1_LEVEL = 5; const BARAJ2_LEVEL = 10;

    const categorySelectionContainer = document.getElementById("category-selection-container");
    const mainContainer = document.getElementById("container"); // Oyun i√ßeriƒüini kapsayan ana div
    const gameContentDiv = document.getElementById("game-content");
    const quizDiv = document.getElementById("quiz");
    const questionBar = document.getElementById("question-bar");
    const timerTextDiv = document.getElementById("timer-text");
    const timerProgressCircle = document.getElementById("timer-circle-progress");
    const feedbackDiv = document.getElementById("feedback");
    const rewardDiv = document.getElementById("reward");
    const lifeline5050Btn = document.getElementById("lifeline-5050");
    const lifelinePhoneBtn = document.getElementById("lifeline-phone");
    const lifelineAudienceBtn = document.getElementById("lifeline-audience");
    const scoreboardList = document.getElementById("scoreboard-list");

    // Ses Elementleri (Referanslar)
     const audioElements = { /* Referanslar deƒüi≈ümedi */
         correct: document.getElementById("audio-correct"), wrong: document.getElementById("audio-wrong"),
         lifeline5050: document.getElementById("audio-lifeline-5050"), lifelinePhone: document.getElementById("audio-lifeline-phone"), lifelineAudience: document.getElementById("audio-lifeline-audience"),
         tick: document.getElementById("audio-tick"), win: document.getElementById("audio-win"), background: document.getElementById("audio-background")
     };

    const CIRCLE_RADIUS = 15.9155;
    const CIRCLE_CIRCUMFERENCE = 2 * Math.PI * CIRCLE_RADIUS;
    const TRANSITION_DURATION = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--transition-speed') || '0.6') * 1000; // CSS'den al, ms cinsinden
    const SCROLL_DELAY = 800; // Scroll s√ºresi tahmini (ms)


    // --- Ses Fonksiyonlarƒ± (Deƒüi≈ümedi) ---
     function playSound(audioElement) { /* √ñnceki koddaki gibi */
         if (!audioElement) { console.error("playSound: Ses elementi bulunamadƒ±!"); return Promise.reject("Element not found"); }
         console.log(`playSound: Attempting to play ${audioElement.id}`);
         try {
             if (!audioElement.loop) { audioElement.currentTime = 0; }
             const playPromise = audioElement.play();
             if (playPromise !== undefined) {
                 return playPromise.catch(error => {
                     console.error(`playSound Error (${audioElement.id}): ${error.name} - ${error.message}`);
                     if(audioElement.id === 'audio-tick') { console.warn("Tick sound failed. Browser might require more interaction or have restrictions."); }
                     return Promise.reject(error);
                 });
             } else { console.warn(`playSound: play() did not return a promise for ${audioElement.id}.`); return Promise.resolve(); }
         } catch (e) { console.error(`playSound Exception (${audioElement.id}):`, e); return Promise.reject(e); }
     }
     function stopSound(audioElement) { /* √ñnceki koddaki gibi */
          if (!audioElement) { console.error("stopSound: Ses elementi bulunamadƒ±!"); return; }
          try { audioElement.pause(); audioElement.currentTime = 0; }
          catch (e) { console.error(`stopSound Exception (${audioElement.id}):`, e); }
      }
     function stopAllSounds() { /* √ñnceki koddaki gibi */
          console.log("Stopping all sounds..."); Object.values(audioElements).forEach(stopSound);
      }
     function stopBackgroundMusic() { /* √ñnceki koddaki gibi */
          console.log("Stopping background music..."); stopSound(audioElements.background);
      }
     function unlockAudioContext() { /* √ñnceki koddaki gibi */
          console.log("Attempting to unlock audio context..."); let unlocked = false;
          Object.values(audioElements).forEach(audio => {
               const playPromise = audio.play();
               if (playPromise !== undefined) {
                   playPromise.then(() => { audio.pause(); audio.currentTime = 0; if (!unlocked) { console.log("Audio context likely unlocked."); unlocked = true; }})
                   .catch(error => { if (!unlocked) { console.warn(`Initial audio unlock failed for ${audio.id}. Interaction might be needed.`); /* unlocked = true; */ } });
               }
          });
      }


    // --- Olay Dinleyiciler ve GE√áƒ∞≈û Y√ñNETƒ∞Mƒ∞ (G√úNCELLENDƒ∞) ---
    document.querySelectorAll("#category-selection button").forEach(btn => {
        btn.addEventListener("click", () => {
            currentCategory = btn.getAttribute("data-category");
            if (!questions[currentCategory] || questions[currentCategory].length < MAX_QUESTIONS) {
                alert(`"${currentCategory}" kategorisi i√ßin yeterli sayƒ±da (${MAX_QUESTIONS}) soru bulunamadƒ±.`);
                return;
            }

            console.log("Category selected:", currentCategory);
            stopAllSounds();
            unlockAudioContext();

            // 1. Kategori Ekranƒ±nƒ± Fade Out Yap
            console.log("Step 1: Fading out category selection...");
            categorySelectionContainer.classList.remove('visible-section');
            categorySelectionContainer.classList.add('hidden-section');

            // 2. Fade Out Bittikten Sonra (setTimeout ile)
            setTimeout(() => {
                console.log("Step 2: Category faded out. Hiding category, showing container structure.");
                categorySelectionContainer.style.display = 'none'; // DOM'dan kaldƒ±r (isteƒüe baƒülƒ±)

                // Ana Oyun Container'ƒ±nƒ± g√∂r√ºn√ºr yap (opacity 1), ama i√ßeriƒüi deƒüil
                mainContainer.classList.remove('hidden-section');
                mainContainer.classList.add('visible-section');

                // ƒ∞√ßeriƒüin ba≈ülangƒ±√ßta ≈üeffaf olduƒüundan emin ol (CSS'de yoksa)
                // gameContentDiv.style.opacity = 0; // Gerekirse

                // 3. Oyun Alanƒ±na Kaydƒ±r
                console.log("Step 3: Scrolling to game container...");
                mainContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });

                // 4. Scroll Bittikten Sonra (Tahmini S√ºre ile) Oyunu Ba≈ülat
                setTimeout(() => {
                    if (mainContainer.classList.contains('visible-section')) { // Hala g√∂r√ºn√ºrse devam et
                         console.log("Step 4: Scroll finished. Initializing game...");
                         gameAreaVisible = true; // Oyun alanƒ± artƒ±k aktif

                         // Oyunu Ba≈ülat
                         resetLifelines();
                         currentQuestionIndex = 0;
                         currentReward = 0;
                         updateRewardDisplay();
                         generateScoreboard();
                         loadQuestion(); // ƒ∞lk soruyu y√ºkler (timer ba≈ülar)

                         // Arka plan m√ºziƒüini ba≈ülat (k√º√ß√ºk gecikmeyle)
                         setTimeout(() => {
                              if (gameAreaVisible) {
                                   playSound(audioElements.background).catch(e => console.warn("Background music failed."));
                              }
                         }, 150);
                    } else {
                         console.log("Step 4 skipped: Main container became hidden during scroll delay.");
                    }

                }, SCROLL_DELAY); // Scroll s√ºresi kadar bekle

            }, TRANSITION_DURATION); // Fade-out s√ºresi kadar bekle
        });
    });

    // --- Diƒüer Fonksiyonlar (generateScoreboard, updateScoreboardVisuals vb.) ---
    // Bu fonksiyonlarda b√ºy√ºk deƒüi≈üiklikler yok, √∂nceki versiyondaki halleri ge√ßerli.
    // Sadece playSound ve stopSound √ßaƒürƒ±larƒ± audioElements objesi √ºzerinden yapƒ±lƒ±yor.
    // √ñrneƒüin: playSound(audioElements.correct), stopSound(audioElements.tick)
    function resetLifelines() { /* Deƒüi≈ümedi */
         lifeline5050Used = false; lifelinePhoneUsed = false; lifelineAudienceUsed = false;
         [lifeline5050Btn, lifelinePhoneBtn, lifelineAudienceBtn].forEach(btn => { btn.disabled = false; btn.style.opacity = 1; });
     }
    function generateScoreboard() { /* Deƒüi≈ümedi */
          scoreboardList.innerHTML = ""; const maxReward = maxRewards[currentCategory];
          for (let level = MAX_QUESTIONS; level >= 1; level--) {
              const rewardVal = Math.round(maxReward * (level / MAX_QUESTIONS)); const li = document.createElement("li"); li.setAttribute("data-step", level);
              const numberSpan = `<span>${level}.</span>`; const amountSpan = `<span>${rewardVal.toLocaleString('tr-TR')} TL</span>`; li.innerHTML = `${numberSpan}${amountSpan}`;
              if (level === BARAJ1_LEVEL || level === BARAJ2_LEVEL) { li.classList.add('baraj'); }
              if (level === MAX_QUESTIONS) { li.style.color = 'var(--accent-yellow)'; li.style.fontWeight = '700'; }
              scoreboardList.appendChild(li);
          }
          updateScoreboardVisuals();
      }
    function updateScoreboardVisuals() { /* Deƒüi≈ümedi */
          document.querySelectorAll("#scoreboard li").forEach(li => {
              const level = parseInt(li.getAttribute("data-step")); li.classList.remove("active", "passed"); li.style.transform = '';
              if ((level === BARAJ1_LEVEL || level === BARAJ2_LEVEL) && level <= currentQuestionIndex) { li.classList.add('passed', 'baraj'); }
              else if (level === (currentQuestionIndex + 1)) { li.classList.add("active"); li.style.transform = 'scale(1.05)'; }
              else if (level <= currentQuestionIndex) { li.classList.add("passed"); if (!li.classList.contains('baraj')) { li.style.opacity = 0.5; } }
              else { if (li.classList.contains('baraj')) { li.style.color = 'var(--accent-yellow)'; li.style.fontWeight = '600'; } else if (level !== MAX_QUESTIONS) { li.style.opacity = 1; li.style.color = ''; li.style.fontWeight = '400'; } }
          });
          updateScoreboardScroll();
      }
    function updateScoreboardScroll() { /* Deƒüi≈ümedi */
           const activeLi = scoreboardList.querySelector('li.active');
           if (activeLi) { activeLi.scrollIntoView({ behavior: 'smooth', block: 'nearest' }); }
           else { const firstLi = scoreboardList.querySelector('li'); if (firstLi) { firstLi.scrollIntoView({ behavior: 'smooth', block: 'start' }); } }
       }
    function loadQuestion() {
         if (!gameAreaVisible) { console.warn("loadQuestion: Game area not visible yet."); return; }
         clearTimer(); feedbackDiv.textContent = ""; enableAllAnswers();
         if (currentQuestionIndex >= MAX_QUESTIONS) {
             feedbackDiv.innerHTML = `üèÜ TEBRƒ∞KLER! B√úY√úK √ñD√úL ${currentReward.toLocaleString('tr-TR')} TL'yi kazandƒ±nƒ±z! üèÜ`;
             playSound(audioElements.win); stopBackgroundMusic(); disableAllAnswers(); updateScoreboardVisuals(); gameAreaVisible = false; return;
         }
         updateScoreboardVisuals(); currentQuestion = questions[currentCategory][currentQuestionIndex];
         questionBar.innerHTML = `${currentQuestionIndex + 1}. ${currentQuestion.question}`;
         const answerDivs = document.querySelectorAll(".answer");
         answerDivs.forEach(div => {
             div.classList.remove("correct", "wrong", "selected", "hidden-lifeline");
             div.style.display = 'flex'; div.style.opacity = 1; div.style.height = ''; div.style.padding = ''; div.style.margin = ''; div.style.border = '';
             div.style.pointerEvents = ''; div.style.animation = ''; div.style.width = 'calc(50% - 8px)';
             const ansKey = div.getAttribute("data-answer"); const ansTextSpan = div.querySelector(".answer-text");
             if (currentQuestion.options[ansKey] !== undefined && ansTextSpan) { ansTextSpan.textContent = currentQuestion.options[ansKey]; }
             else { div.style.display = 'none'; }
         });
         startTimer();
     }
    document.querySelectorAll(".answer").forEach(answerEl => { /* Deƒüi≈ümedi */
          answerEl.addEventListener("click", () => {
              if (answerEl.classList.contains("disabled") || answerEl.classList.contains("hidden-lifeline") || !gameAreaVisible) return;
              clearTimer(); const selectedAnswer = answerEl.getAttribute("data-answer"); disableAllAnswers(); answerEl.classList.add("selected");
              setTimeout(() => { answerEl.classList.remove("selected"); if (selectedAnswer === currentQuestion.answer) { handleCorrectAnswer(answerEl); } else { handleWrongAnswer(answerEl); } }, 2000);
          });
      });
    function handleCorrectAnswer(correctAnswerElement) { /* Ses elementi deƒüi≈üti */
          correctAnswerElement.classList.add("correct"); feedbackDiv.innerHTML = "Doƒüru Cevap! ‚úÖ"; playSound(audioElements.correct);
          const maxReward = maxRewards[currentCategory]; currentReward = Math.round(maxReward * ((currentQuestionIndex + 1) / MAX_QUESTIONS));
          updateRewardDisplay(); currentQuestionIndex++; setTimeout(loadQuestion, 2500);
      }
    function handleWrongAnswer(wrongAnswerElement) { /* Ses elementi deƒüi≈üti */
          wrongAnswerElement.classList.add("wrong"); const guaranteedReward = calculateGuaranteedReward();
          const correctAnswerDiv = document.querySelector(`.answer[data-answer="${currentQuestion.answer}"]`);
          feedbackDiv.innerHTML = `Yanlƒ±≈ü Cevap! ‚ùå Doƒüru: ${currentQuestion.answer}.<br>√ñd√ºl: ${guaranteedReward.toLocaleString('tr-TR')} TL`;
          playSound(audioElements.wrong); stopBackgroundMusic(); if (correctAnswerDiv) { correctAnswerDiv.classList.add("correct"); }
          disableAllAnswers(); updateScoreboardVisuals(); gameAreaVisible = false;
      }
    function calculateGuaranteedReward() { /* Deƒüi≈ümedi */
           let guaranteedReward = 0; const maxReward = maxRewards[currentCategory];
           if (currentQuestionIndex >= BARAJ2_LEVEL) { guaranteedReward = Math.round(maxReward * (BARAJ2_LEVEL / MAX_QUESTIONS)); }
           else if (currentQuestionIndex >= BARAJ1_LEVEL) { guaranteedReward = Math.round(maxReward * (BARAJ1_LEVEL / MAX_QUESTIONS)); }
           return guaranteedReward;
       }
    function disableAllAnswers() { /* Deƒüi≈ümedi */
           document.querySelectorAll(".answer").forEach(div => { if (div.style.display !== 'none' && !div.classList.contains('hidden-lifeline')) { div.classList.add("disabled"); } div.style.animation = ''; div.classList.remove("selected"); });
       }
    function enableAllAnswers() { /* Deƒüi≈ümedi */
           document.querySelectorAll(".answer").forEach(div => { if (!div.classList.contains('hidden-lifeline')) { div.classList.remove("disabled", "correct", "wrong", "selected"); div.style.background = ''; } });
       }
    function setProgress(percent) { /* Deƒüi≈ümedi */
           const offset = CIRCLE_CIRCUMFERENCE - (percent / 100) * CIRCLE_CIRCUMFERENCE; timerProgressCircle.style.strokeDashoffset = offset; timerTextDiv.textContent = timeRemaining;
       }
    function startTimer() { /* Ses elementi deƒüi≈üti */
           clearTimer(); timeRemaining = COUNTDOWN_TIME; timerProgressCircle.style.strokeDasharray = `${CIRCLE_CIRCUMFERENCE} ${CIRCLE_CIRCUMFERENCE}`; timerProgressCircle.style.strokeDashoffset = CIRCLE_CIRCUMFERENCE;
           setTimeout(() => { if (!gameAreaVisible) return; setProgress(100 * timeRemaining / COUNTDOWN_TIME); console.log("startTimer: Attempting to play audioTick."); playSound(audioElements.tick).catch(e => console.warn("Timer tick sound failed to play.")); }, 10);
           timerInterval = setInterval(() => { if (!gameAreaVisible) { clearTimer(); return; } timeRemaining--; const percent = Math.max(0, 100 * timeRemaining / COUNTDOWN_TIME); setProgress(percent); if (timeRemaining <= 0) { handleTimeUp(); } timerProgressCircle.style.stroke = (timeRemaining <= 10) ? 'var(--accent-red)' : 'var(--accent-yellow)'; }, 1000);
       }
    function clearTimer() { /* Ses elementi deƒüi≈üti */
            if (timerInterval) { clearInterval(timerInterval); timerInterval = null; console.log("clearTimer: Attempting to stop audioTick."); stopSound(audioElements.tick); }
            timerTextDiv.textContent = "0"; timerProgressCircle.style.stroke = 'var(--accent-yellow)';
        }
    function handleTimeUp() { /* Ses elementi deƒüi≈üti */
           clearTimer(); const guaranteedReward = calculateGuaranteedReward(); feedbackDiv.innerHTML = `‚è∞ S√ºre Doldu! Oyun bitti.<br>Kazandƒ±ƒüƒ±nƒ±z √∂d√ºl: ${guaranteedReward.toLocaleString('tr-TR')} TL`;
           playSound(audioElements.wrong); stopBackgroundMusic(); disableAllAnswers();
           const correctAnswerDiv = document.querySelector(`.answer[data-answer="${currentQuestion.answer}"]`); if (correctAnswerDiv) { correctAnswerDiv.classList.add("correct"); }
           updateScoreboardVisuals(); gameAreaVisible = false;
       }
     // Joker Fonksiyonlarƒ± (Ses elementleri deƒüi≈üti)
     let lifeline5050Used = false, lifelinePhoneUsed = false, lifelineAudienceUsed = false;
     lifeline5050Btn.addEventListener("click", () => { if (lifeline5050Used || !currentQuestion || !gameAreaVisible) return; lifeline5050Used = true; lifeline5050Btn.disabled = true; lifeline5050Btn.style.opacity = 0.6; playSound(audioElements.lifeline5050); const wrongAnswers = []; /* ... rest */ document.querySelectorAll(".answer").forEach(div => { if (div.style.display !== 'none' && !div.classList.contains('hidden-lifeline') && div.getAttribute("data-answer") !== currentQuestion.answer) { wrongAnswers.push(div); } }); let count = 0; while (count < 2 && wrongAnswers.length > 0) { const idx = Math.floor(Math.random() * wrongAnswers.length); wrongAnswers[idx].classList.add('hidden-lifeline'); wrongAnswers.splice(idx, 1); count++; } feedbackDiv.textContent = "50-50 Jokeri kullanƒ±ldƒ±."; });
     lifelinePhoneBtn.addEventListener("click", () => { if (lifelinePhoneUsed || !currentQuestion || !gameAreaVisible) return; lifelinePhoneUsed = true; lifelinePhoneBtn.disabled = true; lifelinePhoneBtn.style.opacity = 0.6; playSound(audioElements.lifelinePhone); let phoneGuess = ""; /* ... rest */ const randomChance = Math.random(); const correctAnswerKey = currentQuestion.answer; const visibleOptions = []; document.querySelectorAll(".answer").forEach(div => { if (div.style.display !== 'none' && !div.classList.contains('hidden-lifeline')) { visibleOptions.push(div.getAttribute("data-answer")); } }); if (randomChance < 0.75 && visibleOptions.includes(correctAnswerKey)) { phoneGuess = correctAnswerKey; } else { const wrongVisibleOptions = visibleOptions.filter(opt => opt !== correctAnswerKey); if(wrongVisibleOptions.length > 0) { phoneGuess = wrongVisibleOptions[Math.floor(Math.random() * wrongVisibleOptions.length)]; } else { phoneGuess = correctAnswerKey; } } feedbackDiv.textContent = `üìû Telefonla Yardƒ±m: "Sanƒ±rƒ±m cevap ${phoneGuess} ≈üƒ±kkƒ±..."`; });
     lifelineAudienceBtn.addEventListener("click", () => { if (lifelineAudienceUsed || !currentQuestion || !gameAreaVisible) return; lifelineAudienceUsed = true; lifelineAudienceBtn.disabled = true; lifelineAudienceBtn.style.opacity = 0.6; playSound(audioElements.lifelineAudience); const answers = ["A", "B", "C", "D"]; /* ... rest */ let percentages = {}; let remainingPercent = 100; const visibleOptions = []; document.querySelectorAll(".answer").forEach(div => { if (div.style.display !== 'none' && !div.classList.contains('hidden-lifeline')) { visibleOptions.push(div.getAttribute("data-answer")); } else { percentages[div.getAttribute("data-answer")] = 0; } }); if (visibleOptions.length === 0) return; const correctAnswerKey = currentQuestion.answer; let correctPercent = 0; if (visibleOptions.includes(correctAnswerKey)) { correctPercent = Math.floor(Math.random() * 31) + 40; percentages[correctAnswerKey] = correctPercent; remainingPercent -= correctPercent; } const otherVisibleOptions = visibleOptions.filter(opt => opt !== correctAnswerKey); for (let i = 0; i < otherVisibleOptions.length; i++) { const opt = otherVisibleOptions[i]; if (i === otherVisibleOptions.length - 1) { percentages[opt] = Math.max(0, remainingPercent); } else { let avgRemaining = remainingPercent / (otherVisibleOptions.length - i); let perc = Math.floor(Math.random() * Math.min(remainingPercent + 1, avgRemaining * 1.8)); perc = Math.min(perc, remainingPercent); percentages[opt] = perc; remainingPercent -= perc; } } let currentTotal = 0; visibleOptions.forEach(opt => currentTotal += (percentages[opt] || 0)); if (currentTotal !== 100 && visibleOptions.length > 0 && percentages[visibleOptions[0]] !== undefined) { let diff = 100 - currentTotal; percentages[visibleOptions[0]] = Math.max(0, percentages[visibleOptions[0]] + diff); } let resultText = "üìä Seyirci Oylarƒ±: "; answers.forEach(ans => { if (visibleOptions.includes(ans)) { resultText += ` ${ans}: %${Math.round(percentages[ans] || 0)} `; } }); feedbackDiv.textContent = resultText; });
    function updateRewardDisplay() { /* Deƒüi≈ümedi */
          rewardDiv.textContent = "√ñd√ºl: " + currentReward.toLocaleString('tr-TR', { style: 'currency', currency: 'TRY', minimumFractionDigits: 0, maximumFractionDigits: 0 });
      }

    // Initial Setup
    timerProgressCircle.style.strokeDasharray = `${CIRCLE_CIRCUMFERENCE} ${CIRCLE_CIRCUMFERENCE}`;
    timerProgressCircle.style.strokeDashoffset = CIRCLE_CIRCUMFERENCE;
    // Ensure correct initial visibility classes
     categorySelectionContainer.classList.add('visible-section');
     categorySelectionContainer.classList.remove('hidden-section');
     mainContainer.classList.add('hidden-section');
     mainContainer.classList.remove('visible-section');


    </script>
</body>
</html>